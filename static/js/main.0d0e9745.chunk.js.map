{"version":3,"sources":["components/pages/UploadCsvPage.module.scss","components/SettingsOverlayModule.module.scss","components/Layout.module.scss","components/common/Input.module.scss","components/common/ThemeToggle.module.scss","components/common/DropDownInput.module.scss","scatterPlot/plotHelpers.ts","scatterPlot/PlotBuilder.ts","preprocessing/dropDefaultColumns.ts","preprocessing/isEmptyValue.ts","dfMetadata/getDfMetadata.ts","runTsne.worker.ts","contexts/PlotContext.tsx","preprocessing/getOriginalDf.ts","preprocessing/dropEmptyColumns.ts","preprocessing/encodeStringValues.ts","preprocessing/replaceEmptyValues.ts","preprocessing/dfToArray.ts","helpers/throttle.ts","scatterPlot/ScatterPlot.tsx","components/Layout.tsx","components/icons/SettingsIcon.tsx","helpers/classNames.ts","components/common/BlankButton.tsx","components/common/Slider.tsx","components/icons/DropDownIcon.tsx","components/common/DropDownInput.tsx","helpers/useClickOutside.tsx","components/common/Input.tsx","helpers/themeHelper.ts","components/common/ThemeToggle.tsx","components/SettingsOverlayModule.tsx","components/pages/TsneGraphView.tsx","components/pages/UploadCsvPage.tsx","components/pages/Router.tsx","App.tsx","reportWebVitals.ts","index.tsx","components/common/BlankButton.module.scss","components/common/Slider.module.scss"],"names":["module","exports","colorGenerator","deg","step","value","getColorByHue","hue","ColorManager","gen","map","this","NaN","parseInt","next","StyleManager","colorManager","styleSettings","setSettings","reset","getPointRadius","d","sizeField","getPointText","nameField","getPointColor","colorField","getColor","getPointOpacity","opacity","DOT_CLASS","defaultMargin","top","left","bottom","right","PlotBuilder","styleM","svg","mainG","xScale","d3","yScale","lineFunction","margin","height","width","ref","options","current","append","style","background","attr","setupZooming","zoom","on","e","transform","Math","sqrt","k","selectAll","call","xRange","yRange","domain","range","x","y","curve","selector","remove","data","gDots","enter","X","Y","text","DEFAULT_COLUMNS_TO_DROP","isEmptyValue","undefined","isNaN","getDfMetadata","df","rowsMetadata","getColumns","forEach","column","arrValues","series","toArray","push","columnName","name","minValue","min","apply","maxValue","max","Worker_fn","Worker","PreprocessingStatus","PREPROCESSING_PIPELINE","func","statusToChange","REMOVING_DEFAULT_COLUMNS","dropSeries","REMOVING_EMPTY_COLUMNS","columnNames","getColumnNames","jsonDf","JSON","parse","toJSON","emptyColumnNames","cName","every","row","ENCODING_STRING_VALUES","dfTypes","detectTypes","modifiedDf","encoder","jsmlt","LabelEncoder","Type","columnArray","getSeries","Column","encodedColumn","Series","encode","withSeries","REPLACE_EMPTY_VALUES","index","fromJSON","stringify","COMPLETED","PlotContext","React","createContext","usePlotContext","useContext","PlotContextContainer","props","funcs","tsneWorker","TsneWorker","setStyleSettings","setState","setCsvFile","file","csvFile","fileToDataFrame","setTsneParams","newTsneParams","tsneParams","terminate","initTsneWorker","runTsneSteps","a","state","csvFileText","console","log","fromCSV","dynamicTyping","originalDf","endAt","originalDfJson","preprocessDataFrame","preprocessedDf","cbFunc","length","preprocessingState","status","preprocessedDfColumns","preprocessedDfMetadata","dfData","Object","values","xData","Array","from","keys","postMessage","params","NOT_PARSED","epsilon","perplexity","numSteps","costThreshold","pointsRange","tsneStepResult","currentStep","currentCost","points","onmessage","event","stepResult","onTsneStepCompleted","result","Provider","children","Component","throttle","timeFrame","lastTime","Date","getTime","now","defaultOptions","ScatterPlot","svgRef","useRef","useState","setData","useEffect","pointsWithCarInfo","point","rowId","xCoord","yCoord","carInfo","filter","f","updateCarData","updateDots","updateDotsData","init","updateScales","Layout","className","styles","container","SettinsIcon","xmlns","fill","classNames","cls","v","join","BlankButton","link","onClick","title","disabled","restProps","href","button","Slider","defaultValue","onChange","ReactSlider","slider","thumbClassName","thumb","trackClassName","track","renderThumb","valueNow","DropDownIcon","EMPTY_DROPDOWN_ITEM","key","DropDownInput","itemsList","error","label","selected","smaller","isListHidden","setIsListHidden","dropDownRef","handler","domNodeRef","handleMouseDown","contains","target","document","addEventListener","removeEventListener","useClickOutside","handleSelect","useCallback","item","dropDownList","hiddenList","dropDownIcon","rotateIcon","dropDownWrapper","dropDownContainer","it","listItem","errorText","Input","wrapper","DARK","LIGHT","updateColorTheme","theme","getColorTheme","arrayOfVariableKeys","colors","arrayOfVariableValues","cssVariableKey","documentElement","setProperty","color","localStorage","getItem","includes","light","dark","ThemeToggle","isLight","setIsLight","setItem","toggleColorTheme","themeToggleContainer","viewBox","StyleParams","dropdownItems","setDropdownItems","dfKey","getChosenValue","handleOnChangeColorField","handleOnChangeSizeField","handleOnChangeNameField","handleOnChangeOpacity","newOpacity","filterTitle","paramsGrid","paramTitle","TSneParams","setEpsilon","setPerplexity","setNumSteps","setCostThreshold","refitButton","SettingsOverlayModule","open","setOpen","o","settingsContainer","opened","TsneGraphView","UploadCsvPage","fileInputRef","type","hidden","accept","files","csvButton","click","UPLOAD_CSV","GRAPH_VIEW","Router","PagePicker","navigate","useNavigate","location","useLocation","pathname","path","element","to","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"2FACAA,EAAOC,QAAU,CAAC,UAAY,iCAAiC,UAAY,mC,mBCA3ED,EAAOC,QAAU,CAAC,kBAAoB,iDAAiD,OAAS,sCAAsC,OAAS,sCAAsC,YAAc,2CAA2C,WAAa,0CAA0C,WAAa,0CAA0C,YAAc,6C,oBCA1WD,EAAOC,QAAU,CAAC,UAAY,4B,oBCA9BD,EAAOC,QAAU,CAAC,QAAU,yB,oBCA5BD,EAAOC,QAAU,CAAC,qBAAuB,4C,mBCAzCD,EAAOC,QAAU,CAAC,gBAAkB,uCAAuC,kBAAoB,yCAAyC,QAAU,+BAA+B,SAAW,gCAAgC,aAAe,oCAAoC,WAAa,kCAAkC,aAAe,oCAAoC,WAAa,kCAAkC,SAAW,kC,+hBCgC1ZC,GAAV,SAAUA,IAAV,6EAIO,OAHRC,EAAM,EACNC,EAAO,IAFN,SAIa,KAJb,OAKL,OADIC,EAJC,gBAKCC,EAAcD,GAASF,GALxB,OAMG,EANH,OAeS,OANZA,GAAOC,IACI,MAETD,GADAC,GAAc,GACD,GAZZ,UAee,KAff,QAgBH,OADIC,EAfD,iBAgBGC,EAAcD,GAASF,GAhB1B,+DAoBA,SAASG,EAAcC,GAC5B,MAAM,OAAN,OAAcA,EAAd,eAOK,IAAMC,EAAb,WAGE,aAAe,yBAFPC,SAEM,OADNC,SACM,EACZC,KAAKF,IAAMP,IACXS,KAAKD,IAAM,GALf,4CAQE,SAASL,GAQP,OAPKM,KAAKD,IAAIL,KACiBO,MAAzBC,SAASR,EAAQ,IACnBM,KAAKD,IAAIL,GAASM,KAAKF,IAAIK,KAAKD,SAASR,EAAQ,KAAKA,MAEtDM,KAAKD,IAAIL,GAASM,KAAKF,IAAIK,OAAOT,OAG/BM,KAAKD,IAAIL,KAhBpB,mBAmBE,WACEM,KAAKD,IAAM,GACXC,KAAKF,IAAMP,QArBf,KAyBaa,EAAb,aAGE,aAAe,IAAD,gCAFNC,aAAe,IAAIR,EAEb,KADNS,cAA+B,GACzB,KAIdC,YAAc,SAACD,GACb,EAAKA,cAAgBA,GAAiB,GACtC,EAAKD,aAAaG,SANN,KASdC,eAAiB,SAACC,GAGhB,OAAQA,EAFc,EAAKJ,cAAnBK,YAEgB,MAZZ,KAedC,aAAe,SAACF,GAGd,OAAOA,EAFe,EAAKJ,cAAnBO,YAhBI,KAqBdC,cAAgB,SAACJ,GACf,IAAQK,EAAe,EAAKT,cAApBS,WAGR,OAAO,EAAKV,aAAaW,SAASN,EAAEK,KAzBxB,KA4BdE,gBAAkB,SAACP,GAGjB,OAFoB,EAAKJ,cAAjBY,SAEU,GA/BN,KAkCdV,MAAQ,WACN,EAAKH,aAAaG,SAlClBR,KAAKM,cAAgB,MCnFnBa,EAAY,MASZC,EAAgB,CAAEC,IAAK,EAAGC,KAAM,EAAGC,OAAQ,EAAGC,MAAO,GAEtCC,E,iDACjBC,OAAS,IAAItB,E,KACLuB,S,OACAC,W,OACAC,OAASC,M,KACTC,OAASD,M,KACTE,aAAeF,M,KACfG,OAASb,E,KACTc,OAAS,E,KACTC,MAAQ,E,wCAEhB,SAAKC,EAAqBC,GACtBrC,KAAK2B,IAAMG,IAAwBM,EAAIE,SACvCtC,KAAK4B,MAAQ5B,KAAK2B,IAAIY,OAAO,KAC7BvC,KAAK2B,IAAIa,MAAM,aAAcH,EAAQI,YAAc,eACnDzC,KAAK2B,IAAIe,KAAK,SAAU,QACxB1C,KAAK2B,IAAIe,KAAK,QAAS,QACvB1C,KAAK2B,IAAIe,KAAK,UAAd,cAAgCL,EAAQF,MAAxC,YAAiDE,EAAQH,SACzDlC,KAAKiC,OAASI,EAAQJ,QAAUb,EAChCpB,KAAKmC,MAAQE,EAAQF,MAAQnC,KAAKiC,OAAOX,KAAOtB,KAAKiC,OAAOT,MAC5DxB,KAAKkC,OAASG,EAAQH,OAASlC,KAAKiC,OAAOZ,IAAMrB,KAAKiC,OAAOV,OAE7DvB,KAAK2C,iB,0BAGT,WAAgB,IAAD,SACLC,EAAOd,MAAUe,GAAG,QAAQ,SAAAC,GAAM,IAAD,MACnChB,IAAU,SAASY,KAAK,YAAcI,EAAEC,WACxC,YAAKpB,WAAL,SAAUa,MAAM,eAAgB,EAAIQ,KAAKC,KAAKH,EAAEC,UAAUG,IAC1D,YAAKvB,WAAL,SAAUwB,UAAU,UAAUT,KAAK,KAAK,SAAChC,GAAD,OAAO,EAAKgB,OAAOjB,eAAeC,GAAKsC,KAAKC,KAAKH,EAAEC,UAAUG,MACrG,YAAKvB,WAAL,SAAUwB,UAAV,WAAwBhC,EAAxB,UAA0CqB,MAAM,YAAa,EAAIQ,KAAKC,KAAKH,EAAEC,UAAUG,OAG3F,UAAAlD,KAAK2B,WAAL,SAAUyB,KAAKR,K,0BAGnB,SAAaS,EAA0BC,GDhCpC,IACLzB,EACAE,EC+BM/B,KAAK6B,OAASC,MAETyB,OAAO,CAACF,EAAO,GAAIA,EAAO,KAC1BG,MAAM,CAACxD,KAAKiC,OAAOX,KAAMtB,KAAKmC,QACnCnC,KAAK+B,OAASD,MAETyB,OAAO,CAACD,EAAO,GAAIA,EAAO,KAC1BE,MAAM,CAACxD,KAAKkC,OAAQlC,KAAKiC,OAAOV,SACrCvB,KAAKgC,cDxCXH,ECwCqC7B,KAAK6B,ODvC1CE,ECuCkD/B,KAAK+B,ODrChDD,MAEJ2B,GAAE,SAAC/C,GAAD,OAAOmB,EAAOnB,EAAE,OAClBgD,GAAE,SAAChD,GAAD,OAAOqB,EAAOrB,EAAE,OAClBiD,MAAM7B,Q,oBCoCP,SAAO8B,GAAyB,IAAD,EAC3B,UAAA5D,KAAK2B,WAAL,SAAUwB,UAAUS,GAAUC,W,wBAGlC,SACIC,GACK,IAAD,SACJ9D,KAAK6D,OAAO,QACZ,IAAME,EAAK,UAAG/D,KAAK4B,aAAR,aAAG,EAAYuB,UAAUhC,GAC/B2C,KAAKA,GACLE,QACAzB,OAAO,KACPG,KAAK,QAASvB,GACd,OAAL4C,QAAK,IAALA,KAAOxB,OAAO,UACTG,KAAK,MAAM,SAAChC,GACT,OAAO,EAAKmB,OAAOnB,EAAEuD,MACxBvB,KAAK,MAAM,SAAChC,GAAQ,OAAO,EAAKqB,OAAOrB,EAAEwD,MACzCxB,KAAK,IAAK1C,KAAK0B,OAAOjB,gBACtB+B,MAAM,UAAWxC,KAAK0B,OAAOT,iBAC7BuB,MAAM,OAAQxC,KAAK0B,OAAOZ,eAC1B,OAALiD,QAAK,IAALA,KAAOxB,OAAO,QAAQ4B,KAAKnE,KAAK0B,OAAOd,cAClC4B,MAAM,QAAS,WACfA,MAAM,cAAe,OACrBA,MAAM,YAAa,QACnBE,KAAK,KAAK,SAAChC,GACZ,OAAO,EAAKmB,OAAOnB,EAAEuD,MACpBvB,KAAK,KAAK,SAAChC,GAAQ,OAAO,EAAKqB,OAAOrB,EAAEwD,Q,uBAGjD,WACSlE,KAAK4B,QAGI5B,KAAK4B,MACdW,OAAO,KACPG,KAAK,YAAa,eAAiB1C,KAAKkC,OAAS,KACjDQ,KAAK,QAAS,gBACdU,KAAKtB,IAAc9B,KAAK6B,SACxBW,MAAM,QAAS,eAEdW,UAAU,QAAQX,MAAM,OAAQ,WAExBxC,KAAK4B,MACdW,OAAO,KACPG,KAAK,YAAa,aAAe1C,KAAKiC,OAAOX,KAAO,QACpDoB,KAAK,QAAS,gBACdU,KAAKtB,IAAY9B,KAAK+B,SACtBS,MAAM,QAAS,eAEdW,UAAU,QAAQX,MAAM,OAAQ,gB,iDCjH9C,IAAM4B,EAAoC,CAAC,KAAM,KAAM,MCFhD,SAASC,EAAa3E,GAC3B,YACY4E,IAAV5E,GACU,OAAVA,GACU,KAAVA,GACkB,kBAAVA,GAAsB6E,MAAM7E,G,qBCIjC,SAAS8E,EAAcC,GAC5B,IAAMC,EAA+B,GAarC,OAX0CD,EAAGE,aACrCC,SAAQ,SAACC,GACf,IAAMC,EAAsBD,EAAOE,OAAOC,UAE1CN,EAAaO,KAAK,CAChBC,WAAYL,EAAOM,KACnBC,SAAUpC,KAAKqC,IAAIC,MAAM,KAAMR,GAC/BS,SAAUvC,KAAKwC,IAAIF,MAAM,KAAMR,QAI5BJ,ECvBM,SAASe,IACtB,OAAO,IAAIC,OAAO,IAA0B,+C,ICsBlCC,E,iBAAAA,O,2BAAAA,I,uDAAAA,I,mDAAAA,I,mDAAAA,I,+CAAAA,I,0BAAAA,M,KAuCZ,IAAMC,EAA8C,CAClD,CAAEC,KC7DG,SAAuBpB,GAC5B,OAAOA,GD4DgBqB,eAAgBH,EAAoBI,0BAC3D,CAAEF,KJ5DG,SAA4BpB,GACjC,OAAOA,EAAGuB,WAAW5B,II2DO0B,eAAgBH,EAAoBM,wBAChE,CAAEJ,KE9DG,SAA0BpB,GAC/B,IAAMyB,EAAwBzB,EAAG0B,iBAC3BC,EAAgBC,KAAKC,MAAM7B,EAAG8B,UAE9BC,EAA6B,GASnC,OARAN,EAAYtB,SAAQ,SAAC6B,GACYL,EAAOM,OAAM,SAACC,GAAD,OAActC,EAAasC,EAAIF,QAGzED,EAAiBvB,KAAKwB,MAInBhC,EAAGuB,WAAWQ,IFiDKV,eAAgBH,EAAoBiB,wBAC9D,CAAEf,KG/DG,SAA4BpB,GAClC,IAAMoC,EAAUpC,EAAGqC,cAEfC,EAA+CtC,EAC7CuC,EAAU,IAAIC,gBAAoBC,aAaxC,OAZAL,EAAQjC,SAAQ,SAAC+B,GAChB,GAAiB,WAAbA,EAAIQ,KAAR,CAIA,IAAMC,EAAwB3C,EAAG4C,UAAUV,EAAIW,QAAQtC,UACjDuC,EAAwB,IAAIC,IAAOR,EAAQS,OAAOL,IAGxDL,GADAA,EAAaA,EAAWf,WAAWW,EAAIW,SACfI,WAAX,eAAyBf,EAAIW,OAASC,QAG7CR,GH8CsBjB,eAAgBH,EAAoBgC,sBAChE,CAAE9B,KI9DG,SAA4BpB,GACjC,IAAMyB,EAAwBzB,EAAG0B,iBAC3BC,EAAgBC,KAAKC,MAAM7B,EAAG8B,UAUpC,OARAL,EAAYtB,SAAQ,SAAC6B,GACnBL,EAAOxB,SAAQ,SAAC+B,EAAUiB,GACpBvD,EAAasC,EAAIF,MACnBL,EAAOwB,GAAOnB,IATiB,SAc9BoB,YAASxB,KAAKyB,UAAU1B,KJkDHN,eAAgBH,EAAoBoC,YAG5DC,EAAcC,IAAMC,cAAkC,MAC/CC,EAAiB,kBAC5BC,qBAAyBJ,IAENK,E,kDAOnB,WAAYC,GAAsB,IAAD,8BAC/B,cAAMA,IAJSC,WAGgB,IAFzBC,WAAyB,IAAIC,EAEJ,EAqDjCC,iBAAmB,SAACpI,GAClB,EAAKqI,SAAS,CAAErI,mBAtDe,EAyDjCsI,WAAa,SAACC,GACZ,EAAKF,SAAS,CAAEG,QAASD,GAAQ,EAAKE,kBA1DP,EA6DjCC,cAAgB,SAACC,GACf,EAAKN,SACH,CAAEO,WAAYD,IACd,WACE,EAAKT,WAAWW,YAEhB,EAAKX,WAAa,IAAIC,EACtB,EAAKW,iBACL,EAAKC,mBArEsB,EA0EjCN,gBA1EiC,sBA0Ef,gCAAAO,EAAA,yDACW,OAAvB,EAAKC,MAAMT,QADC,2EAK8B,EAAKS,MAAMT,eALzC,aAK8B,EAAoB3E,OALlD,eAMIG,KADdkF,EALU,+BAOdC,QAAQC,IAAI,gCAPE,0BAWVjF,EAA6BkF,YAAQH,EAAa,CAAEI,eAAe,IAEzE,EAAKjB,SACH,CAEEkB,WAAapF,EAAGqF,MAAM,KACtBC,eAAgBtF,EAAGqF,MAAM,KAAM9E,WAKjC,EAAKgF,qBAtBS,4CA1Ee,EAoGjCA,oBAAsB,WACpB,GAA8B,OAA1B,EAAKT,MAAMM,WAAf,CAIA,IACII,EADmB,EAAKV,MAApBM,WAERjE,EAAuBhB,SAAQ,SAACnF,EAAyBmI,GACvD,IAAQ/B,EAAyBpG,EAAzBoG,KAAMC,EAAmBrG,EAAnBqG,eAEdmE,EAAiBpE,EAAKoE,GAEtB,IAAMC,EAAUtC,IAAUhC,EAAuBuE,OAAS,EACtD,EAAKd,aACL,aAEJ,EAAKV,SACH,CAAEyB,mBAAoB,CAAEC,OAAQvE,EAAgBmE,mBAChDC,QAtH2B,EA2HjCb,aAAe,WACb,MAAmC,EAAKE,MAAMa,mBAAtCC,EAAR,EAAQA,OAAQJ,EAAhB,EAAgBA,eAChB,GAAII,IAAW1E,EAAoBoC,WAAckC,EAAjD,CAIA,EAAKtB,SAAS,CACZ2B,sBAAuBL,EAAe9D,iBACtCoE,uBAAwB/F,EAAcyF,KAGxC,IAAMO,EAA+BP,EKnNPjF,UACpBjF,KACV,SAAC4G,GAAD,OAAuB8D,OAAOC,OAAO/D,MLkN/BgE,EAAkBC,MAAMC,KAAKD,MAAMJ,EAAOL,QAAQW,QAExD,EAAKtC,WAAWuC,YAAY,CAC1BC,OAAQ,EAAKzB,MAAML,WACnByB,QACAH,aAzIF,EAAKjB,MAAQ,CACXT,QAAS,KACTe,WAAY,KACZE,eAAgB,KAChBK,mBAAoB,CAClBC,OAAQ1E,EAAoBsF,WAC5BhB,eAAgB,MAElBK,sBAAuB,KACvBC,uBAAwB,KACxBrB,WAAY,CACVgC,QAAS,GACTC,WAAY,GACZC,SAAU,IACVC,cAAe,GACfC,YAAa,CACX7H,EAAG,EAAE,EAAG,GACRC,EAAG,EAAE,EAAG,KAGZ6H,eAAgB,CACdC,YAAa,EACbC,YAAa,EACbC,OAAQ,IAEVpL,cAAe,IAGjB,EAAKiI,MAAQ,CACXK,WAAY,EAAKA,WACjBF,iBAAkB,EAAKA,iBACvBM,cAAe,EAAKA,eAlCS,E,qDAsCjC,WACEhJ,KAAKoJ,mB,4BAGP,WAAkB,IAAD,OAKfpJ,KAAKwI,WAAWmD,UAAY,SAAUC,IAJV,SAACC,GAC3B,EAAKlD,SAAS,CAAE4C,eAAgBM,IAKhCC,CADmBF,EAAM9H,KAAKiI,W,oBAgGlC,WACE,OACE,cAAC/D,EAAYgE,SAAb,CAAsBtM,MAAK,2BAAOM,KAAKuJ,OAAUvJ,KAAKuI,OAAtD,SACGvI,KAAKsI,MAAM2D,e,GA1J8BhE,IAAMiE,WMzEjD,SAASC,EAAStG,EAAWuG,GAClC,IAAIC,EAAmB,IAAIC,KAAK,GAAGC,UACnC,OAAO,WACL,IAAMC,GAAM,IAAIF,MAAOC,UACnBC,EAAMH,GAAYD,IACpBvG,EAAI,WAAJ,aACAwG,EAAWG,ICCjB,IAAMC,EAAiB,CACrBtK,MAAO,IACPD,OAAQ,IAERD,OAAQ,CAAEZ,IAAK,GAAIC,KAAM,GAAIC,OAAQ,GAAIC,MAAO,KAQnC,SAASkL,EAAYpE,GAClC,IAAMqE,EAASC,iBAAO,MACtB,EAAwBC,qBAAxB,mBAAO/I,EAAP,KAAagJ,EAAb,KACA,EAKI3E,IAJF7H,EADF,EACEA,cACAyJ,EAFF,EAEEA,eACAb,EAHF,EAGEA,WACAqC,EAJF,EAIEA,eAGInJ,EAAMwK,iBAAoB,IAAInL,GA6CpC,OAnBAsL,oBAAUZ,GAAS,kBAxBG,WACpB,IAEMa,EAFazB,EAAXG,OAEoC3L,KAAI,SAACkN,GAC/C,IAAQC,EAA0BD,EAA1BC,MAAOC,EAAmBF,EAAnBE,OAAQC,EAAWH,EAAXG,OACjBC,EAAUtD,EAAiBA,EAAemD,QAAS5I,EAEzD,OACE+I,GAAO,2BACFA,GADE,IAELpJ,EAAGkJ,EACHjJ,EAAGkJ,OAGNE,QAAO,SAAAC,GAAC,OAAIA,KACfT,EAAQE,GASeQ,KAAiB,KAAM,CAACjC,IAEjDwB,oBAAUZ,GAAS,kBARI,SAACrI,GAClBA,GACF1B,EAAIE,QAAQmL,WAAW3J,GAMF4J,CAAe5J,KAAO,KAAO,CAACA,IAEvDiJ,qBAAU,WACR3K,EAAIE,QAAQqL,KAAKhB,EAAQF,GACzBrK,EAAIE,QAAQsL,aACV1E,EAAWoC,YAAY7H,EACvByF,EAAWoC,YAAY5H,KAExB,IAEHqJ,qBAAU,WACJjJ,IACF1B,EAAIE,QAAQZ,OAAOnB,YAAYD,GAC/B8B,EAAIE,QAAQmL,WAAW3J,MAExB,CAACxD,IAEG,qBAAK8B,IAAKuK,EAAQzK,OAAQ,S,sBC/DpB2L,EATU,SAACvF,GACzB,IAAQ2D,EAAa3D,EAAb2D,SACR,OACC,qBAAK6B,UAAWC,IAAOC,UAAvB,SACE/B,KCUWgC,MAff,WACI,OACI,sBAAKC,MAAM,6BAA6B/L,MAAM,KAAKD,OAAO,KAAKiM,KAAK,OAApE,UACI,sBACIA,KAAK,UACLzN,EAAE,wnDAEN,sBACIyN,KAAK,UACLzN,EAAE,+K,iBCXX,SAAS0N,IAA+D,IAAD,uBAAhDC,EAAgD,yBAAhDA,EAAgD,gBAC7E,OAAOA,EACLtO,KAAI,SAACuO,GACL,GAAiB,qBAANA,IAA2B,IAANA,OAEzB,IAAiB,kBAANA,EACjB,OAAOA,EACD,GAAMA,EAAE,GACd,OAAOA,EAAE,GAEV,OAAO,QAEPhB,QAAO,SAACgB,GAAD,QAASA,KAChBC,KAAK,K,4FCqCOC,GArCiC,SAAClG,GAC/C,IACEmG,EAOEnG,EAPFmG,KACAC,EAMEpG,EANFoG,QACAC,EAKErG,EALFqG,MACAC,EAIEtG,EAJFsG,SACAd,EAGExF,EAHFwF,UACA7B,EAEE3D,EAFF2D,SACG4C,EAPL,YAQIvG,EARJ,GASA,OAAImG,EAEA,2CACEK,KAAMF,OAAWtK,EAAYmK,EAC7BE,MAAOA,EACPnM,MAAO8F,EAAM9F,MACbsL,UAAWM,EAAWL,IAAOgB,OAAQjB,EAAWc,GAAYb,IAAOa,WAC/DC,GALN,aAOG5C,KAKL,gDACEyC,QAASA,EACTC,MAAOA,EACPC,SAAUA,EACVpM,MAAO8F,EAAM9F,MACbsL,UAAWM,EAAWL,IAAOgB,OAAQjB,IACjCe,GANN,aAQG5C,M,8BCTQ+C,GAvBiB,SAAC1G,GAChC,IACC2G,EAGG3G,EAHH2G,aAAcL,EAGXtG,EAHWsG,SACdpJ,EAEG8C,EAFH9C,IAAKH,EAEFiD,EAFEjD,IAAK3F,EAEP4I,EAFO5I,MAAOwP,EAEd5G,EAFc4G,SACjBzP,EACG6I,EADH7I,KAGD,OACC,cAAC0P,GAAA,EAAD,CACCF,aAAcA,EACdL,SAAUA,EACVpJ,IAAKA,EACLH,IAAKA,EACL5F,KAAI,OAAEA,QAAF,IAAEA,IAAQ,EACdC,MAAOA,EACPwP,SAAUA,EACVpB,UAAWC,KAAOqB,OAClBC,eAAgBtB,KAAOuB,MACvBC,eAAgBxB,KAAOyB,MACvBC,YAAa,SAACnH,EAAOiB,GAAR,OAAkB,+CAASjB,GAAT,aAAgB,+BAAOiB,EAAMmG,kB,UC3BhDC,GAHqC,SAACrH,GACjD,OAAO,sBAAMwF,UAAWxF,EAAMwF,UAAvB,gB,iGCoBJ,IAAM8B,GAAoC,CAAEC,IAAK,QAyFzCC,GAvF+B,SAACxH,GAC7C,IACE4G,EAQE5G,EARF4G,SACAa,EAOEzH,EAPFyH,UAGAC,GAIE1H,EANFwF,UAMExF,EALF2H,MAKE3H,EAJF0H,OACAE,EAGE5H,EAHF4H,SACAC,EAEE7H,EAFF6H,QACGtB,EARL,YASIvG,EATJ,IAUA,EAAwCuE,oBAAS,GAAjD,mBAAOuD,EAAP,KAAqBC,EAArB,KAEMC,ECpCuB,SAC7BC,GAEA,IAAMC,EAAa5D,iBAAoB,MAavC,OAZAG,qBAAU,WACR,IAAM0D,EAAkB,SAAC7E,GAAuB,IAAD,EACzC,OAAC4E,QAAD,IAACA,GAAD,UAACA,EAAYlO,eAAb,OAAC,EAAqBoO,SAAS9E,EAAM+E,SACvCJ,KAKJ,OAFAK,SAASC,iBAAiB,YAAaJ,GAEhC,WACLG,SAASE,oBAAoB,YAAaL,MAE3C,IACID,EDoBaO,EAAgB,kBAAMV,GAAgB,MAEpDW,EAAeC,uBAAY,SAACC,GAChChC,EAASgC,GACTb,GAAgB,KACf,CAACD,IAmBEe,EAAe/C,EACnBL,KAAOoD,aACPf,GAAgBrC,KAAOqD,WACvBjB,GAAWpC,KAAOoC,SAEdkB,EAAejD,EACnBL,KAAOsD,cACNjB,GAAgBrC,KAAOuD,YA2B1B,OACI,8CAAK,UAAQ,iBAAoBzC,GAAjC,cAvBA,sBACEzM,IAAKkO,EACLxC,UAAWC,KAAOwD,gBAFpB,UAIE,eAAC,GAAD,CACE7C,QAAS,kBAAM2B,GAAiBD,IAChCtC,UAAWM,EACTL,KAAOyD,kBACPrB,GAAWpC,KAAOoC,SAJtB,UAOGD,EAASxQ,OAASwQ,EAASL,KAAOD,GAAoBC,IACvD,cAAC,GAAD,CAAc/B,UAAWuD,OAG3B,qBAAKvD,UAAWqD,EAAhB,SA3CoC,CACtCvB,IADsC,oBAEnCG,IAGqBhQ,KAAI,SAAC0R,GAAD,OAC5B,cAAC,GAAD,CACE3D,UAAWC,KAAO2D,SAElBhD,QAAS,kBAAMsC,EAAaS,IAH9B,SAKGA,EAAG/R,OAAS+R,EAAG5B,KAHX4B,EAAG5B,aA6CPG,GACC,sBACElC,UAAWC,KAAO4D,UAClBhD,MAAOqB,EACP,UAAQ,cAHV,SAKGA,S,qBEhFE4B,GAfe,SAACtJ,GAC7B,IACE4G,EAEE5G,EAFF4G,SACAxP,EACE4I,EADF5I,MAGF,OACI,uBACIoO,UAAWC,KAAO8D,QAClBnS,MAAOA,EACPwP,SAAU,SAACpM,GAAD,OAAOoM,EAASpM,EAAE6N,OAAOjR,W,qBCpBhCoS,GAAO,OACPC,GAAQ,QAId,SAASC,KACd,IAAMC,EAAQC,KACRC,EAAsB1H,OAAOK,KAAKsH,IAClCC,EAAwB5H,OAAOC,OAAO0H,IAE5CD,EAAoBvN,SAAQ,SAAC0N,EAAgB1K,GAC3CgJ,SAAS2B,gBAAgB/P,MAAMgQ,YAC7BF,EACAD,EAAsBzK,GAAOqK,OAa5B,SAASC,KACd,IAAMO,EAAQC,aAAaC,QAAQ,eAAiB,GACpD,MAAK,CAACb,GAAMC,IAAOa,SAASH,GAGdA,EAFLX,GASX,IAAMM,GAAiB,CACvB,eAAgB,CAACS,MAAO,UAAWC,KAAM,WACzC,qBAAsB,CAACD,MAAO,UAAWC,KAAM,WAE/C,SAAU,CAACD,MAAO,UAAWC,KAAM,WACnC,cAAe,CAACD,MAAO,UAAWC,KAAM,WAExC,iBAAkB,CAACD,MAAO,UAAWC,KAAM,WAC3C,gBAAiB,CAACD,MAAO,UAAWC,KAAM,WAE1C,aAAc,CAACD,MAAO,UAAWC,KAAM,WACvC,gBAAiB,CAACD,MAAO,UAAWC,KAAM,WAE1C,iBAAkB,CAACD,MAAO,UAAWC,KAAM,WAG3C,iBAAkB,CAACD,MAAO,UAAWC,KAAM,WAC3C,eAAgB,CAACD,MAAO,UAAWC,KAAM,YCV1BC,GAxCmB,SAACzK,GAC/B,MAA8BuE,mBAASqF,OAAoBH,IAA3D,mBAAOiB,EAAP,KAAgBC,EAAhB,KACA,OACI,cAAC,GAAD,yBACI,UAAQ,gBACJ3K,GAFR,IAGIoG,QAAS,WACLuE,EDMT,WACL,IACMhB,EADMC,OACUH,GAAQD,GAAOC,GAGrC,OAFAW,aAAaQ,QAAQ,aAAcjB,GACnCD,KACOC,ECXkBkB,KAAuBpB,KAEtCjE,UAAWC,KAAOqF,qBANtB,SAQKJ,EACK,qBACE9E,MAAM,6BACN/L,MAAM,KACND,OAAO,KACPiM,KAAK,OACLkF,QAAQ,YALV,SAOE,sBACIlF,KAAK,UACLzN,EAAE,2HAGZ,qBACMwN,MAAM,6BACN/L,MAAM,KACND,OAAO,KACPiM,KAAK,OACLkF,QAAQ,YALd,SAOM,sBACIlF,KAAK,UACLzN,EAAE,4xBCCpB4S,GAAwB,WAAO,IAAD,EAClC,EAAmEnL,IAA3DmC,EAAR,EAAQA,sBAAuBhK,EAA/B,EAA+BA,cAAeoI,EAA9C,EAA8CA,iBAE9C,EAA0CmE,mBACxC,CAAC+C,KADH,mBAAO2D,EAAP,KAAsBC,EAAtB,KAIAzG,qBAAU,WACHzC,GAA0BA,EAAsBH,QAIrDqJ,EACElJ,EAAsBvK,KAAI,SAAC0T,GAAD,MAAoB,CAAE5D,IAAK4D,SAEtD,CAACnJ,IAEJ,IAAMoJ,EAAiB,SAACxC,GACtB,OAAOA,IAAStB,GAAsBA,GAAoBC,IAAMqB,EAAKrB,KAGjE8D,EAA2B1C,uBAAY,SAACC,GAC5CxI,EAAiB,2BAAKpI,GAAN,IAAqBS,WAAY2S,EAAexC,QAC/D,CAAC5Q,IACEsT,EAA0B3C,uBAAY,SAACC,GAC3CxI,EAAiB,2BAAKpI,GAAN,IAAqBK,UAAW+S,EAAexC,QAC9D,CAAC5Q,IACEuT,EAA0B5C,uBAAY,SAACC,GAC3CxI,EAAiB,2BAAKpI,GAAN,IAAqBO,UAAW6S,EAAexC,QAC9D,CAAC5Q,IACEwT,EAAwB7C,uBAAY,SAAC8C,GACzCrL,EAAiB,2BAAKpI,GAAN,IAAqBY,QAAS6S,OAC7C,CAACzT,IAEJ,OACE,qCACE,qBAAKwN,UAAWC,IAAOiG,YAAvB,gCAGA,sBAAKlG,UAAWC,IAAOkG,WAAvB,UACE,qBAAKnG,UAAWC,IAAOmG,WAAvB,yBACA,cAAC,GAAD,CACEnE,UAAWwD,EACXrD,SAAU5P,EAAcS,WACpB,CAAE8O,IAAKvP,EAAcS,YACrB6O,GAEJV,SAAUyE,EACV1D,MAAM,cACND,MAAM,KAER,qBAAKlC,UAAWC,IAAOmG,WAAvB,wBACA,cAAC,GAAD,CACEnE,UAAWwD,EACXrD,SAAU5P,EAAcK,UACpB,CAAEkP,IAAKvP,EAAcK,WACrBiP,GAEJV,SAAU0E,EACV3D,MAAM,aACND,MAAM,KAER,qBAAKlC,UAAWC,IAAOmG,WAAvB,qBACA,cAAC,GAAD,CACEjF,aAAc,EACdzJ,IAAK,EACLH,IAAK,EACL3F,MAAK,UAAEY,EAAcY,eAAhB,QAA2B,EAChCgO,SAAU4E,EACVrU,KAAM,MAER,qBAAKqO,UAAWC,IAAOmG,WAAvB,wBACA,cAAC,GAAD,CACEnE,UAAWwD,EACXrD,SAAU5P,EAAcO,UACpB,CAAEgP,IAAKvP,EAAcO,WACrB+O,GAEJV,SAAU2E,EACV5D,MAAM,aACND,MAAM,YAOVmE,GAAuB,WAC3B,MAAsChM,IAA9Be,EAAR,EAAQA,WAAYF,EAApB,EAAoBA,cAEpB,EAA8B6D,mBAAS3D,EAAWgC,SAAlD,mBAAOA,EAAP,KAAgBkJ,EAAhB,KACA,EAAoCvH,mBAAS3D,EAAWiC,YAAxD,mBAAOA,EAAP,KAAmBkJ,EAAnB,KACA,EAAgCxH,mBAAS3D,EAAWkC,UAApD,mBAAOA,EAAP,KAAiBkJ,EAAjB,KACA,EAA0CzH,mBAAS3D,EAAWmC,eAA9D,mBAAOA,EAAP,KAAsBkJ,EAAtB,KAYA,OAAO,qCACL,qBAAKzG,UAAWC,IAAOiG,YAAvB,8BAGA,sBAAKlG,UAAWC,IAAOkG,WAAvB,UACE,qBAAKnG,UAAWC,IAAOmG,WAAvB,qBACA,cAAC,GAAD,CACEjF,aAAc,GACdzJ,IAAK,IACLH,IAAK,EACL3F,MAAOwL,EACPgE,SAAUkF,EACV3U,KAAM,KAER,qBAAKqO,UAAWC,IAAOmG,WAAvB,wBACA,cAAC,GAAD,CACEjF,aAAc,GACdzJ,IAAK,IACLH,IAAK,EACL3F,MAAOyL,EACP+D,SAAUmF,IAEZ,qBAAKvG,UAAWC,IAAOmG,WAAvB,0BACA,cAAC,GAAD,CAAOxU,MAAO0L,EACP8D,SAAU,SAACZ,GAAD,OAAOgG,EAAYpU,SAASoO,OAC7C,qBAAKR,UAAWC,IAAOmG,WAAvB,4BACA,cAAC,GAAD,CACEjF,aAAc,GACdzJ,IAAK,IACLH,IAAK,EACL3F,MAAO2L,EACP6D,SAAUqF,EACV9U,KAAM,KAGR,cAAC,GAAD,CACEqO,UAAWC,IAAOyG,YAClB9F,QA/C2B,WAC/B1F,EAAc,2BACTE,GADQ,IAEXgC,UACAC,aACAC,WACAC,oBAuCA,0BASSoJ,GA3KyB,WACtC,MAAwB5H,oBAAkB,GAA1C,mBAAO6H,EAAP,KAAaC,EAAb,KAEA,OACE,qCACE,cAAC,GAAD,CACEjG,QAAS,kBAAMiG,GAAQ,SAAAC,GAAC,OAAKA,MAC7BjG,MAAO+F,EAAO,QAAU,OACxB5G,UAAWC,IAAOgB,OAHpB,SAKE,cAAC,EAAD,MAEF,sBAAKjB,UAAWM,EAAWL,IAAO8G,kBAAmBH,GAAQ3G,IAAO+G,QAApE,UACE,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,WClBOC,GATiB,WAC/B,OACC,eAAC,EAAD,WACC,cAAC,EAAD,IACA,cAAC,GAAD,Q,qBC6BYC,GAhCiB,WAC/B,IAAIC,EAAwC,KAEpCrM,EAAeT,IAAfS,WAQR,OACC,cAAC,EAAD,UACC,sBAAKkF,UAAWC,KAAOC,UAAvB,UACC,uBACC5L,IAAK,SAACA,GAAD,OAAU6S,EAAe7S,GAC9B8S,KAAK,OACLC,QAAM,EACNC,OAAO,OACPlG,SAdgB,SAACpM,GAChBA,EAAE6N,OAAO0E,OACZzM,EAAW9F,EAAE6N,OAAO0E,MAAM,OAczB,wBACCvH,UAAWC,KAAOuH,UAClB5G,QAAS,kCAAMuG,SAAN,aAAM,EAAcM,SAF9B,8BCpBSC,GAAa,aACbC,GAAa,QAEbC,GAAS,WACrB,OACC,cAAC,IAAD,UACC,cAACC,GAAD,OAKH,SAASA,KACR,IAAOvL,EAAsBjC,IAAtBiC,mBACDwL,EAAWC,cACXC,EAAWC,cASjB,OAPAhJ,qBAAU,WACL3C,EAAmBC,SAAW1E,EAAoBoC,UACrD6N,EAASH,IACCK,EAASE,SAASpD,SAAS6C,KACrCG,EAASJ,MAER,CAACpL,IAEH,eAAC,IAAD,WACC,cAAC,IAAD,CAAO6L,KAAMT,GAAYU,QAAS,cAAC,GAAD,MAClC,cAAC,IAAD,CAAOD,KAAMR,UAAmBS,QAAS,cAAC,GAAD,MACzC,cAAC,IAAD,CAAOD,KAAK,IAAIC,QAAS,cAAC,IAAD,CAAUC,GAAIX,UCf3BY,OAbf,WAIE,OAHErJ,qBAAU,WACNiF,OACD,IAEH,qBAAKlE,UAAU,MAAf,SACE,cAAC,EAAD,UACE,cAAC,GAAD,SCCOuI,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFpG,SAASqG,eAAe,SAM1BZ,M,mBCfAhX,EAAOC,QAAU,CAAC,OAAS,4BAA4B,SAAW,gC,mBCAlED,EAAOC,QAAU,CAAC,OAAS,uBAAuB,MAAQ,sBAAsB,MAAQ,yB","file":"static/js/main.0d0e9745.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UploadCsvPage_container__2Kou4\",\"csvButton\":\"UploadCsvPage_csvButton__2AVTe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settingsContainer\":\"SettingsOverlayModule_settingsContainer__1hhXP\",\"opened\":\"SettingsOverlayModule_opened__1pMgn\",\"button\":\"SettingsOverlayModule_button__2cMtM\",\"filterTitle\":\"SettingsOverlayModule_filterTitle__1C_sZ\",\"paramsGrid\":\"SettingsOverlayModule_paramsGrid__3BSBK\",\"paramTitle\":\"SettingsOverlayModule_paramTitle__Pmotw\",\"refitButton\":\"SettingsOverlayModule_refitButton__1NTO7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Layout_container__2g3W4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Input_wrapper__2BA42\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"themeToggleContainer\":\"ThemeToggle_themeToggleContainer__2qn_h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropDownWrapper\":\"DropDownInput_dropDownWrapper__3I76e\",\"dropDownContainer\":\"DropDownInput_dropDownContainer__257KA\",\"smaller\":\"DropDownInput_smaller__1yw6h\",\"disabled\":\"DropDownInput_disabled__2yb-W\",\"dropDownIcon\":\"DropDownInput_dropDownIcon__1K1e-\",\"rotateIcon\":\"DropDownInput_rotateIcon__3Qq8G\",\"dropDownList\":\"DropDownInput_dropDownList__331fI\",\"hiddenList\":\"DropDownInput_hiddenList__1touR\",\"listItem\":\"DropDownInput_listItem__2Ph0D\"};","import * as d3 from \"d3\";\nimport { ScaleLinear } from \"d3-scale\";\nimport { Line } from \"d3\";\nimport { DataRow } from \"./ScatterPlot\";\nimport { StyleSettings } from \"../helpers/types\";\n\nexport const DEFAULT_FRAME: Frame = {\n  margin: { top: 10, right: 30, bottom: 30, left: 60 },\n  width: 460 - 60 - 30,\n  height: 400 - 10 - 30\n}\n\nexport type Frame = {\n  width: number;\n  height: number;\n  margin: { top: number, right: number, bottom: number, left: number },\n}\n\nexport default function formatDataToDots(data: Array<DataRow>): Array<[number, number]> {\n  return data.map(d => [d.X, d.Y]);\n}\n\nexport function scaledLine(\n  xScale: ScaleLinear<any, any>,\n  yScale: ScaleLinear<any, any>\n): Line<any> {\n  return d3\n    .line()\n    .x((d) => xScale(d[0]))\n    .y((d) => yScale(d[1]))\n    .curve(d3.curveMonotoneX);\n}\n\nexport function* colorGenerator(): Generator<string, string, number> {\n  let deg = 0;\n  let step = 360;\n  // @ts-ignore\n  let value = yield null;\n  yield getColorByHue(value || deg);\n  let i = 0;\n  while (true) {\n    i++;\n    deg += step;\n    if (deg >= 360) {\n      step = step / 2;\n      deg = step / 2;\n    }\n    // @ts-ignore\n    let value = yield null;\n    yield getColorByHue(value || deg);\n  }\n}\n\nexport function getColorByHue(hue: number): string {\n  return `hsl(${hue}, 70%, 60%)`;\n}\n\nexport function getRandomColor(): string {\n  return `hsl(${Math.floor(Math.random() * 360)}, 70%, 60%)`;\n}\n\nexport class ColorManager {\n  private gen: Generator<string, string, number>;\n  private map: { [key: string | number]: string };\n  constructor() {\n    this.gen = colorGenerator();\n    this.map = {};\n  }\n\n  getColor(value: string | number) {\n    if (!this.map[value]) {\n      if (parseInt(value + \"\") !== NaN) {\n        this.map[value] = this.gen.next(parseInt(value + \"\")).value;\n      } else {\n        this.map[value] = this.gen.next().value;\n      }\n    }\n    return this.map[value];\n  }\n\n  reset() {\n    this.map = {};\n    this.gen = colorGenerator();\n  }\n}\n\nexport class StyleManager {\n  private colorManager = new ColorManager();\n  private styleSettings: StyleSettings = {};\n  constructor() {\n    this.styleSettings = {};\n  }\n\n  setSettings = (styleSettings: StyleSettings) => {\n    this.styleSettings = styleSettings || {};\n    this.colorManager.reset();\n  }\n\n  getPointRadius = (d: any) => {\n    const { sizeField } = this.styleSettings;\n    // @ts-ignore\n    return (d[sizeField] || 1.51);\n  }\n\n  getPointText = (d: any) => {\n    const { nameField } = this.styleSettings;\n    // @ts-ignore\n    return d[nameField];\n  }\n\n  getPointColor = (d: any) => {\n    const { colorField } = this.styleSettings;\n    // @ts-ignore\n    // TODO: d[colorField] = x, y = f(x), where f - value -> deg transformator\n    return this.colorManager.getColor(d[colorField]);\n  }\n\n  getPointOpacity = (d: any) => {\n    const { opacity } = this.styleSettings;\n    // @ts-ignore\n    return opacity || 1;\n  }\n\n  reset = () => {\n    this.colorManager.reset();\n  }\n}\n","import { RefObject } from \"react\";\nimport { Selection } from \"d3\";\nimport * as d3 from \"d3\";\nimport {DataRow} from \"./ScatterPlot\";\nimport {scaledLine, StyleManager} from \"./plotHelpers\";\n\n\nconst DOT_CLASS = \"dot\";\ntype Options = {\n    width: number;\n    height: number;\n    background?: string;\n    stroke?: string;\n    margin?: { top: number; left: number; bottom: number; right: number };\n};\n\nconst defaultMargin = { top: 0, left: 0, bottom: 0, right: 0 };\n\nexport default class PlotBuilder {\n    styleM = new StyleManager();\n    private svg: Selection<Element, any, HTMLElement, any> | undefined;\n    private mainG: Selection<SVGGElement, any, HTMLElement, any> | undefined;\n    private xScale = d3.scaleLinear();\n    private yScale = d3.scaleLinear();\n    private lineFunction = d3.line();\n    private margin = defaultMargin;\n    private height = 0;\n    private width = 0;\n\n    init(ref: RefObject<any>, options: Options): void {\n        this.svg = d3.select<Element, any>(ref.current);\n        this.mainG = this.svg.append('g');\n        this.svg.style(\"background\", options.background || \"transparent\");\n        this.svg.attr(\"height\", \"auto\");\n        this.svg.attr(\"width\", \"100%\");\n        this.svg.attr(\"viewBox\", `0 0 ${options.width} ${options.height}`);\n        this.margin = options.margin || defaultMargin;\n        this.width = options.width - this.margin.left - this.margin.right;\n        this.height = options.height - this.margin.top - this.margin.bottom;\n\n        this.setupZooming();\n    }\n\n    setupZooming() {\n        const zoom = d3.zoom().on(\"zoom\", e => {\n            d3.select('svg g').attr(\"transform\", (e.transform));\n            this.svg?.style(\"stroke-width\", 3 / Math.sqrt(e.transform.k));\n            this.svg?.selectAll(\"circle\").attr(\"r\", (d) => this.styleM.getPointRadius(d) / Math.sqrt(e.transform.k));\n            this.svg?.selectAll(`.${DOT_CLASS} text`).style(\"font-size\", 5 / Math.sqrt(e.transform.k));\n        });\n\n        this.svg?.call(zoom);\n    }\n\n    updateScales(xRange: [number, number], yRange: [number, number]): void {\n        this.xScale = d3\n            .scaleLinear()\n            .domain([xRange[0], xRange[1]])\n            .range([this.margin.left, this.width]);\n        this.yScale = d3\n            .scaleLinear()\n            .domain([yRange[0], yRange[1]])\n            .range([this.height, this.margin.bottom]);\n        this.lineFunction = scaledLine(this.xScale, this.yScale);\n    }\n\n    remove(selector: string): void {\n        this.svg?.selectAll(selector).remove();\n    }\n\n    updateDots(\n        data: Array<DataRow>,\n    ): void {\n        this.remove(\".\" + DOT_CLASS);\n        const gDots = this.mainG?.selectAll(DOT_CLASS)\n            .data(data)\n            .enter()\n            .append('g')\n            .attr(\"class\", DOT_CLASS);\n        gDots?.append(\"circle\")\n            .attr(\"cx\", (d) => {\n                return this.xScale(d.X) } )\n            .attr(\"cy\", (d) => { return this.yScale(d.Y) } )\n            .attr(\"r\", this.styleM.getPointRadius)\n            .style(\"opacity\", this.styleM.getPointOpacity)\n            .style(\"fill\", this.styleM.getPointColor);\n        gDots?.append(\"text\").text(this.styleM.getPointText)\n            .style(\"color\", \"#69b3a2\")\n            .style(\"font-weight\", \"100\")\n            .style(\"font-size\", \"10px\")\n            .attr(\"x\", (d) => {\n            return this.xScale(d.X) } )\n            .attr(\"y\", (d) => { return this.yScale(d.Y) } );\n    }\n\n    setUpAxis(): void {\n        if (!this.mainG) {\n            return;\n        }\n        const xAxis = this.mainG\n            .append(\"g\")\n            .attr(\"transform\", \"translate(0,\" + this.height + \")\")\n            .attr(\"class\", \"axis axis--x\")\n            .call(d3.axisBottom(this.xScale))\n            .style(\"color\", \"transparent\");\n\n        xAxis.selectAll(\"text\").style(\"fill\", \"#59536B\");\n\n        const yAxis = this.mainG\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + this.margin.left + \", 0)\")\n            .attr(\"class\", \"axis axis--y\")\n            .call(d3.axisLeft(this.yScale))\n            .style(\"color\", \"transparent\");\n\n        yAxis.selectAll(\"text\").style(\"fill\", \"#59536B\");\n    }\n}\n","import { IDataFrame, IFieldRecord } from \"data-forge\";\n\nconst DEFAULT_COLUMNS_TO_DROP: string[] = [\"id\", \"Id\", \"ID\"];\n\nexport function dropDefaultColumns(df: IDataFrame<number, IFieldRecord>): IDataFrame<number, IFieldRecord> {\n  return df.dropSeries(DEFAULT_COLUMNS_TO_DROP);\n}","export function isEmptyValue(value: any): boolean {\n  return (\n    value === undefined ||\n    value === null ||\n    value === '' ||\n    (typeof value === 'number' && isNaN(value))\n  );\n}","import { IDataFrame, IFieldRecord, ISeries } from \"data-forge\";\nimport { IColumn } from \"data-forge/build/lib/dataframe\";\n\nexport interface IRowMetadata {\n  columnName: string;\n  minValue: number;\n  maxValue: number;\n}\n\nexport function getDfMetadata(df: IDataFrame<number, IFieldRecord>): IRowMetadata[] {\n  const rowsMetadata: IRowMetadata[] = [];\n\n  const columns: ISeries<number, IColumn> = df.getColumns();\n  columns.forEach((column: IColumn) => {\n    const arrValues: number[] = column.series.toArray();\n\n    rowsMetadata.push({\n      columnName: column.name,\n      minValue: Math.min.apply(null, arrValues),\n      maxValue: Math.max.apply(null, arrValues),\n    } as IRowMetadata);\n  });\n\n  return rowsMetadata;\n} ","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/runTsne.worker.f4604769.worker.js\");\n}\n","import React, { useContext } from \"react\";\nimport { DataFrame, fromCSV, IDataFrame, IFieldRecord } from \"data-forge\";\nimport {\n  getOriginalDf,\n  dropDefaultColumns,\n  dropEmptyColumns,\n  encodeStringValues,\n  replaceEmptyValues,\n  dfToArray,\n} from \"../preprocessing\";\nimport {\n  IRowMetadata,\n  getDfMetadata\n} from \"../dfMetadata/getDfMetadata\";\nimport {\n  ITsneParams,\n  IDataRow,\n  ITsneStepResult,\n} from \"../tsneWrapper/TsneWrapper\";\nimport { StyleSettings } from \"../helpers/types\";\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport TsneWorker from 'worker-loader!../runTsne.worker';\n\nexport enum PreprocessingStatus {\n  NOT_PARSED,\n  REMOVING_DEFAULT_COLUMNS,\n  REMOVING_EMPTY_COLUMNS,\n  ENCODING_STRING_VALUES,\n  REPLACE_EMPTY_VALUES,\n  COMPLETED,\n}\n\nexport interface PreprocessingState {\n  status: PreprocessingStatus,\n  preprocessedDf: IDataFrame<number, IFieldRecord> | null,\n}\n\ninterface PreprocessingStep {\n  func: (df: IDataFrame<number, IFieldRecord>) => IDataFrame<number, IFieldRecord>,\n  statusToChange: PreprocessingStatus,\n}\n\ninterface PlotState {\n  csvFile: File | null;\n  originalDf: IDataFrame<number, IFieldRecord> | null,\n  originalDfJson: any[] | null,\n  preprocessingState: PreprocessingState,\n  preprocessedDfColumns: string[] | null,\n  preprocessedDfMetadata: IRowMetadata[] | null,\n  tsneParams: ITsneParams,\n  tsneStepResult: ITsneStepResult,\n  styleSettings: StyleSettings,\n}\n\ninterface PlotFuncs {\n  setCsvFile: (file: File | null) => void;\n  setStyleSettings: (style: StyleSettings) => void;\n  setTsneParams: (newTsneParams: ITsneParams) => void;\n}\n\ntype IPlotContext = PlotState & PlotFuncs;\n\nconst PREPROCESSING_PIPELINE: PreprocessingStep[] = [\n  { func: getOriginalDf, statusToChange: PreprocessingStatus.REMOVING_DEFAULT_COLUMNS },\n  { func: dropDefaultColumns, statusToChange: PreprocessingStatus.REMOVING_EMPTY_COLUMNS },\n  { func: dropEmptyColumns, statusToChange: PreprocessingStatus.ENCODING_STRING_VALUES },\n  { func: encodeStringValues, statusToChange: PreprocessingStatus.REPLACE_EMPTY_VALUES },\n  { func: replaceEmptyValues, statusToChange: PreprocessingStatus.COMPLETED },\n];\n\nconst PlotContext = React.createContext<IPlotContext | any>(null);\nexport const usePlotContext = (): IPlotContext =>\n  useContext<IPlotContext>(PlotContext);\n\nexport default class PlotContextContainer extends React.Component<\n  any,\n  PlotState\n> {\n  private readonly funcs: PlotFuncs;\n  private tsneWorker: TsneWorker = new TsneWorker();\n\n  constructor(props: Readonly<{}>) {\n    super(props);\n\n    this.state = {\n      csvFile: null,\n      originalDf: null,\n      originalDfJson: null,\n      preprocessingState: {\n        status: PreprocessingStatus.NOT_PARSED,\n        preprocessedDf: null,\n      },\n      preprocessedDfColumns: null,\n      preprocessedDfMetadata: null,\n      tsneParams: {\n        epsilon: 10,\n        perplexity: 30,\n        numSteps: 500,\n        costThreshold: 11,\n        pointsRange: {\n          x: [-1, 1],\n          y: [-1, 1],\n        },\n      },\n      tsneStepResult: {\n        currentStep: 0,\n        currentCost: 0,\n        points: [],\n      },\n      styleSettings: {} as StyleSettings,\n    };\n\n    this.funcs = {\n      setCsvFile: this.setCsvFile,\n      setStyleSettings: this.setStyleSettings,\n      setTsneParams: this.setTsneParams,\n    };\n  }\n\n  componentDidMount() {\n    this.initTsneWorker();\n  }\n\n  initTsneWorker() {\n    const onTsneStepCompleted = (stepResult: ITsneStepResult): void => {\n      this.setState({ tsneStepResult: stepResult });\n    }\n\n    this.tsneWorker.onmessage = function (event: MessageEvent<any>) {\n      const stepResult = event.data.result as ITsneStepResult;\n      onTsneStepCompleted(stepResult);\n    }\n  }\n\n  setStyleSettings = (styleSettings: StyleSettings) => {\n    this.setState({ styleSettings });\n  }\n\n  setCsvFile = (file: File | null) => {\n    this.setState({ csvFile: file }, this.fileToDataFrame);\n  }\n\n  setTsneParams = (newTsneParams: ITsneParams): void => {\n    this.setState(\n      { tsneParams: newTsneParams },\n      () => {\n        this.tsneWorker.terminate();\n\n        this.tsneWorker = new TsneWorker();\n        this.initTsneWorker();\n        this.runTsneSteps();\n      }\n    );\n  }\n\n  fileToDataFrame = async (): Promise<void> => {\n    if (this.state.csvFile === null) {\n      return;\n    }\n\n    const csvFileText: string | undefined = await this.state.csvFile?.text();\n    if (csvFileText === undefined) {\n      console.log('Error: No text from CSV file');\n      return;\n    }\n\n    const df: DataFrame<number, any> = fromCSV(csvFileText, { dynamicTyping: true });\n\n    this.setState(\n      {\n        // TODO: for short demo\n        originalDf: (df.endAt(2000) as DataFrame<number, any>),\n        originalDfJson: df.endAt(2000).toArray(),\n        // TODO: for full presentation\n        // originalDf: df,\n        // originalDfJson: df.toArray(),\n      },\n      this.preprocessDataFrame\n    );\n  }\n\n  preprocessDataFrame = (): void => {\n    if (this.state.originalDf === null) {\n      return;\n    }\n\n    const { originalDf } = this.state;\n    let preprocessedDf: IDataFrame<number, IFieldRecord> = originalDf;\n    PREPROCESSING_PIPELINE.forEach((step: PreprocessingStep, index: number) => {\n      const { func, statusToChange } = step;\n\n      preprocessedDf = func(preprocessedDf);\n\n      const cbFunc = (index === PREPROCESSING_PIPELINE.length - 1)\n        ? this.runTsneSteps\n        : () => {};\n\n      this.setState(\n        { preprocessingState: { status: statusToChange, preprocessedDf }},\n        cbFunc\n      );\n    });\n  }\n\n  runTsneSteps = (): void => {\n    const { status, preprocessedDf } = this.state.preprocessingState;\n    if (status !== PreprocessingStatus.COMPLETED || !preprocessedDf) {\n      return;\n    }\n\n    this.setState({\n      preprocessedDfColumns: preprocessedDf.getColumnNames(),\n      preprocessedDfMetadata: getDfMetadata(preprocessedDf)\n    });\n\n    const dfData: IDataRow[] = dfToArray(preprocessedDf);\n    const xData: number[] = Array.from(Array(dfData.length).keys());\n\n    this.tsneWorker.postMessage({\n      params: this.state.tsneParams,\n      xData,\n      dfData,\n    });\n  }\n\n  render(): React.ReactNode {\n    return (\n      <PlotContext.Provider value={{ ...this.state, ...this.funcs }}>\n        {this.props.children}\n      </PlotContext.Provider>\n    );\n  }\n}\n","import { IDataFrame, IFieldRecord } from \"data-forge\";\n\nexport function getOriginalDf(df: IDataFrame<number, IFieldRecord>): IDataFrame<number, IFieldRecord> {\n  return df;\n}","import { IDataFrame, IFieldRecord } from \"data-forge\";\nimport { isEmptyValue } from \"./isEmptyValue\";\n\nexport function dropEmptyColumns(df: IDataFrame<number, IFieldRecord>): IDataFrame<number, IFieldRecord> {\n  const columnNames: string[] = df.getColumnNames();\n  const jsonDf: any[] = JSON.parse(df.toJSON());\n\n  const emptyColumnNames: string[] = [];\n  columnNames.forEach((cName: string) => {\n    const isColumnEmpty: boolean = jsonDf.every((row: any) => isEmptyValue(row[cName]));\n\n    if (isColumnEmpty) {\n      emptyColumnNames.push(cName);\n    }\n  });\n\n  return df.dropSeries(emptyColumnNames);\n}","import { IDataFrame, IFieldRecord, Series } from \"data-forge\";\nimport * as jsmlt from '@jsmlt/jsmlt'\n\nexport function encodeStringValues(df: IDataFrame<number, IFieldRecord>): IDataFrame<number, IFieldRecord> {\n\tconst dfTypes = df.detectTypes();\n\n\tlet modifiedDf: IDataFrame<number, IFieldRecord> = df;\n\tconst encoder = new jsmlt.Preprocessing.LabelEncoder();\n\tdfTypes.forEach((row) => {\n\t\tif (row.Type !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst columnArray: string[] = df.getSeries(row.Column).toArray();\n\t\tconst encodedColumn: Series = new Series(encoder.encode(columnArray));\n\t\t\n\t\tmodifiedDf = modifiedDf.dropSeries(row.Column);\n\t\tmodifiedDf = modifiedDf.withSeries({ [row.Column]: encodedColumn });\n\t});\n\n\treturn modifiedDf;\n}","import { IDataFrame, IFieldRecord, fromJSON } from \"data-forge\";\nimport { isEmptyValue } from \"./isEmptyValue\";\n\nconst EMPTY_VALUE_TO_REPLACE: number = -1;\n\nexport function replaceEmptyValues(df: IDataFrame<number, IFieldRecord>): IDataFrame<number, IFieldRecord> {\n  const columnNames: string[] = df.getColumnNames();\n  const jsonDf: any[] = JSON.parse(df.toJSON());\n\n  columnNames.forEach((cName: string) => {\n    jsonDf.forEach((row: any, index: number) => {\n      if (isEmptyValue(row[cName])) {\n        jsonDf[index][cName] = EMPTY_VALUE_TO_REPLACE;\n      }\n    });\n  });\n\n  return fromJSON(JSON.stringify(jsonDf));\n}\n","import { IDataFrame, IFieldRecord } from \"data-forge\";\nimport { IDataRow } from \"../tsneWrapper/TsneWrapper\";\n\nexport function dfToArray(df: IDataFrame<number, IFieldRecord>): IDataRow[] {\n  const rows: IFieldRecord[] = df.toArray();\n  return rows.map(\n    (row: IFieldRecord) => Object.values(row)\n  );\n}","// https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_throttle\nexport function throttle(func: any, timeFrame: number) {\n  let lastTime: number = new Date(0).getTime();\n  return (...args: any) => {\n    const now = new Date().getTime();\n    if (now - lastTime >= timeFrame) {\n      func(...args);\n      lastTime = now;\n    }\n  };\n}","import React, { ReactElement, useEffect, useRef, useState } from \"react\";\nimport PlotBuilder from \"./PlotBuilder\";\nimport \"./ScatterPlot.css\";\nimport { usePlotContext } from \"../contexts/PlotContext\";\nimport { throttle } from \"../helpers/throttle\";\n\ninterface Props { }\n\nconst defaultOptions = {\n  width: 600,\n  height: 400,\n  // background: \"#d3d3d3\",\n  margin: { top: 10, left: 30, bottom: 10, right: 10 },\n};\n\nexport type DataRow = {\n  [key: string]: number | string;\n  X: number,\n  Y: number,\n}\nexport default function ScatterPlot(props: Props): ReactElement {\n  const svgRef = useRef(null);\n  const [data, setData] = useState<DataRow[]>();\n  const {\n    styleSettings,\n    originalDfJson,\n    tsneParams,\n    tsneStepResult,\n  } = usePlotContext();\n\n  const ref = useRef<PlotBuilder>(new PlotBuilder());\n\n  const updateCarData = () => {\n    const { points } = tsneStepResult;\n\n    const pointsWithCarInfo: DataRow[] = points.map((point) => {\n      const { rowId, xCoord, yCoord } = point;\n      const carInfo = originalDfJson ? originalDfJson[rowId] : undefined;\n\n      return (\n        carInfo && {\n          ...carInfo,\n          X: xCoord,\n          Y: yCoord,\n        }\n      );\n    }).filter(f => f);\n    setData(pointsWithCarInfo);\n  }\n\n  const updateDotsData = (data: DataRow[] | undefined) => {\n    if (data) {\n      ref.current.updateDots(data);\n    }\n  }\n\n  useEffect(throttle(() => updateCarData(), 500), [tsneStepResult]);\n\n  useEffect(throttle(() => updateDotsData(data), 2000), [data]);\n\n  useEffect(() => {\n    ref.current.init(svgRef, defaultOptions);\n    ref.current.updateScales(\n      tsneParams.pointsRange.x,\n      tsneParams.pointsRange.y,\n    );\n  }, []);\n\n  useEffect(() => {\n    if (data) {\n      ref.current.styleM.setSettings(styleSettings);\n      ref.current.updateDots(data);\n    }\n  }, [styleSettings]);\n\n  return <svg ref={svgRef} height={\"100%\"} />;\n}\n","import React from \"react\";\nimport styles from \"./Layout.module.scss\";\n\nconst Layout: React.FC = (props) => {\n\tconst { children } = props;\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\nexport default Layout;\n","import React from \"react\";\n\nfunction SettinsIcon() {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\">\n            <path\n                fill=\"#97E0CA\"\n                d=\"M23.463 9.957l-2.807-.68a9.089 9.089 0 00-.59-1.429l1.44-2.4a.703.703 0 00-.106-.859L19.41 2.6a.703.703 0 00-.858-.105l-2.4 1.44a9.089 9.089 0 00-1.428-.59L14.043.536A.703.703 0 0013.359 0h-2.812a.703.703 0 00-.683.537l-.682 2.807a9.096 9.096 0 00-1.427.59l-2.4-1.44a.703.703 0 00-.86.106L2.507 4.59a.703.703 0 00-.106.858l1.44 2.4A9.09 9.09 0 003.25 9.28l-2.717.68a.703.703 0 00-.533.68v2.812c0 .323.22.604.533.682l2.717.68c.157.495.354.973.59 1.43l-1.44 2.4a.703.703 0 00.107.86l1.988 1.988a.703.703 0 00.86.106l2.4-1.44c.457.237.936.434 1.43.591l.68 2.717c.078.313.36.533.682.533h2.812c.323 0 .604-.22.682-.533l.68-2.717a9.092 9.092 0 001.43-.591l2.401 1.44c.277.166.63.122.859-.106l1.989-1.988a.703.703 0 00.105-.86l-1.44-2.4c.236-.456.434-.934.59-1.427l2.808-.682a.703.703 0 00.537-.683V10.64a.703.703 0 00-.537-.684zm-.87 2.943l-2.664.647a.703.703 0 00-.513.501 7.684 7.684 0 01-.77 1.862.703.703 0 00.006.713l1.365 2.275-1.212 1.213-2.275-1.365a.703.703 0 00-.714-.006 7.689 7.689 0 01-1.861.77.703.703 0 00-.5.508l-.645 2.576h-1.714l-.644-2.576a.703.703 0 00-.5-.508 7.684 7.684 0 01-1.862-.77.703.703 0 00-.714.006L5.101 20.11 3.89 18.898l1.365-2.275a.703.703 0 00.006-.713 7.683 7.683 0 01-.77-1.862.703.703 0 00-.508-.5l-2.576-.644V11.19l2.576-.644a.703.703 0 00.508-.5 7.684 7.684 0 01.77-1.862.703.703 0 00-.006-.714L3.89 5.195l1.212-1.212 2.276 1.365a.703.703 0 00.713.006 7.683 7.683 0 011.862-.77.703.703 0 00.501-.513l.647-2.665h1.707l.646 2.665a.7.7 0 00.502.513 7.684 7.684 0 011.86.77.703.703 0 00.715-.006l2.275-1.365 1.212 1.212-1.365 2.275a.703.703 0 00-.006.714c.335.58.594 1.205.77 1.862.066.248.263.44.513.501l2.665.646V12.9z\"\n            />\n            <path\n                fill=\"#97E0CA\"\n                d=\"M12 8c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6.857A2.86 2.86 0 019.143 12 2.86 2.86 0 0112 9.143 2.86 2.86 0 0114.857 12 2.86 2.86 0 0112 14.857z\"\n            />\n        </svg>\n    );\n}\n\nexport default SettinsIcon;\n","export function classNames(...cls: Array<string | undefined | false>): string {\n\treturn cls\n\t\t.map((v) => {\n\t\t\tif (typeof v === \"undefined\" || v === false) {\n\t\t\t\t// ignore\n\t\t\t} else if (typeof v === \"string\") {\n\t\t\t\treturn v;\n\t\t\t} else if (!!v[1]) {\n\t\t\t\treturn v[0];\n\t\t\t}\n\t\t\treturn null;\n\t\t})\n\t\t.filter((v) => !!v)\n\t\t.join(\" \");\n}\n","import React, { CSSProperties } from \"react\";\n\nimport styles from \"./BlankButton.module.scss\";\nimport {classNames} from \"../../helpers/classNames\";\n\ntype BlankButtonProps = {\n  className?: string;\n  style?: CSSProperties;\n  title?: string;\n  disabled?: boolean;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  link?: string;\n};\nconst BlankButton: React.FC<BlankButtonProps> = (props) => {\n  const {\n    link,\n    onClick,\n    title,\n    disabled,\n    className,\n    children,\n    ...restProps\n  } = props;\n  if (link) {\n    return (\n      <a\n        href={disabled ? undefined : link}\n        title={title}\n        style={props.style}\n        className={classNames(styles.button, className, disabled && styles.disabled)}\n        {...restProps}\n      >\n        {children}\n      </a>\n    );\n  }\n  return (\n    <button\n      onClick={onClick}\n      title={title}\n      disabled={disabled}\n      style={props.style}\n      className={classNames(styles.button, className)}\n      {...restProps}\n    >\n      {children}\n    </button>\n  );\n};\n\nexport default BlankButton;\n","import React from \"react\";\nimport ReactSlider from \"react-slider\";\nimport styles from \"./Slider.module.scss\";\n\ntype Props = {\n\tdefaultValue?: number;\n\tdisabled?: boolean;\n\tmax: number;\n\tmin: number;\n\tvalue: number;\n\tonChange: (value: number) => void;\n\tstep?: number;\n}\nconst Slider: React.FC<Props> = (props) => {\n\tconst {\n\t\tdefaultValue, disabled,\n\t\tmax, min, value, onChange,\n\t\tstep\n\t} = props;\n\n\treturn (\n\t\t<ReactSlider\n\t\t\tdefaultValue={defaultValue}\n\t\t\tdisabled={disabled}\n\t\t\tmax={max}\n\t\t\tmin={min}\n\t\t\tstep={step ?? 1}\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tclassName={styles.slider}\n\t\t\tthumbClassName={styles.thumb}\n\t\t\ttrackClassName={styles.track}\n\t\t\trenderThumb={(props, state) => <div {...props}><span>{state.valueNow}</span></div>}\n\t\t/>);\n}\n\nexport default Slider;\n","import React from \"react\";\n\nconst DropDownIcon: React.FC<{className: string}> = (props) => {\n    return <span className={props.className}>v</span>\n}\nexport default DropDownIcon;\n","import React, { FC, useCallback, useState } from \"react\";\nimport DropDownIcon from \"../icons/DropDownIcon\";\nimport BlankButton from \"./BlankButton\";\nimport styles from \"./DropDownInput.module.scss\";\nimport {useClickOutside} from \"../../helpers/useClickOutside\";\nimport {classNames} from \"../../helpers/classNames\";\n\n\nexport function mapStringToItem(val: string): DropdownItem {\n  return { key: val };\n}\n\nexport type DropdownItem = { value?: any; key: string };\ntype DropDownInputProps = {\n  itemsList: Array<DropdownItem>;\n  onChange: (item: DropdownItem) => void;\n  className?: string;\n  label: string;\n  error: string;\n  selected: DropdownItem;\n  smaller?: boolean;\n};\n\nexport const EMPTY_DROPDOWN_ITEM: DropdownItem = { key: 'None' };\n\nconst DropDownInput: FC<DropDownInputProps> = (props) => {\n  const {\n    onChange,\n    itemsList,\n    className,\n    label,\n    error,\n    selected,\n    smaller,\n    ...restProps\n  } = props;\n  const [isListHidden, setIsListHidden] = useState(true);\n\n  const dropDownRef = useClickOutside(() => setIsListHidden(true));\n\n  const handleSelect = useCallback((item: DropdownItem): void => {\n    onChange(item);\n    setIsListHidden(true);\n  }, [isListHidden]);\n\n  const renderValueItems = () => {\n    const itemsListWithEmpty: DropdownItem[] = [\n      EMPTY_DROPDOWN_ITEM,\n      ...itemsList,\n    ];\n\n    return itemsListWithEmpty.map((it) => (\n      <BlankButton\n        className={styles.listItem}\n        key={it.key}\n        onClick={() => handleSelect(it)}\n      >\n        {it.value || it.key}\n      </BlankButton>\n    ));\n  };\n\n  const dropDownList = classNames(\n    styles.dropDownList,\n    isListHidden && styles.hiddenList,\n    smaller && styles.smaller\n  );\n  const dropDownIcon = classNames(\n    styles.dropDownIcon,\n    !isListHidden && styles.rotateIcon\n  );\n\n  const getFieldValue = () => {\n    return (\n      <div\n        ref={dropDownRef as React.RefObject<HTMLDivElement>}\n        className={styles.dropDownWrapper}\n      >\n        <BlankButton\n          onClick={() => setIsListHidden(!isListHidden)}\n          className={classNames(\n            styles.dropDownContainer,\n            smaller && styles.smaller\n          )}\n        >\n          {selected.value || selected.key || EMPTY_DROPDOWN_ITEM.key}\n          <DropDownIcon className={dropDownIcon} />\n        </BlankButton>\n\n        <div className={dropDownList}>\n          {renderValueItems()}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n      <div data-cy=\"input-wrapper\" {...restProps}>\n        {getFieldValue()}\n        {error && (\n          <span\n            className={styles.errorText}\n            title={error}\n            data-cy=\"input-error\"\n          >\n            {error}\n          </span>\n        )}\n      </div>\n  );\n};\n\nexport default DropDownInput;\n","import { RefObject, useEffect, useRef } from \"react\";\n\nexport const useClickOutside = (\n  handler: () => void\n): RefObject<HTMLElement> => {\n  const domNodeRef = useRef<HTMLElement>(null);\n  useEffect(() => {\n    const handleMouseDown = (event: MouseEvent) => {\n      if (!domNodeRef?.current?.contains(event.target as Element)) {\n        handler();\n      }\n    };\n    document.addEventListener(\"mousedown\", handleMouseDown);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handleMouseDown);\n    };\n  }, []);\n  return domNodeRef;\n};\n","import React, { FC } from \"react\";\nimport styles from \"./Input.module.scss\";\n\n\ntype InputProps = {\n  onChange: (val: string) => void;\n  className?: string;\n  value?: number;\n};\n\nconst Input: FC<InputProps> = (props) => {\n  const {\n    onChange,\n    value,\n  } = props;\n\n  return (\n      <input\n          className={styles.wrapper}\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n      />\n  );\n};\n\nexport default Input;\n","export const DARK = \"dark\";\nexport const LIGHT = \"light\";\n\nexport type Theme = \"dark\" | \"light\";\n\nexport function updateColorTheme(): void {\n  const theme = getColorTheme();\n  const arrayOfVariableKeys = Object.keys(colors);\n  const arrayOfVariableValues = Object.values(colors);\n\n  arrayOfVariableKeys.forEach((cssVariableKey, index) => {\n    document.documentElement.style.setProperty(\n      cssVariableKey,\n      arrayOfVariableValues[index][theme]\n    );\n  });\n}\n\nexport function toggleColorTheme(): Theme {\n  const cur = getColorTheme();\n  const theme = cur === LIGHT ? DARK : LIGHT;\n  localStorage.setItem(\"colorTheme\", theme);\n  updateColorTheme();\n  return theme;\n}\n\nexport function getColorTheme(): Theme {\n  const color = localStorage.getItem(\"colorTheme\") || \"\";\n  if (![DARK, LIGHT].includes(color)) {\n    return DARK;\n  }\n  return <Theme>color;\n}\n\ntype Colors = {\n  [key: string]: { dark: string; light: string };\n};\n\nconst colors: Colors = {\n\"--background\": {light: \"#DADADF\", dark: \"#34344A\"},\n\"--background-light\": {light: \"#FEFEFE\", dark: \"#48485C\"},\n\n\"--font\": {light: \"#7DC2C5\", dark: \"#7DC2C5\"},\n\"--grey-font\": {light: \"#34344A\", dark: \"#B7B6C1\"},\n\n\"--button-color\": {light: \"#9CFFFA\", dark: \"#7DC2C5\"},\n\"--button-font\": {light: \"#34344A\", dark: \"#FEFEFE\"},\n\n\"--sub-text\": {light: \"#929D9E\", dark: \"#929D9E\"},\n\"--accent-blue\": {light: \"#7DC2C5\", dark: \"#97E0CA\"},\n\n\"--border-color\": {light: \"#DADADF\", dark: \"#B7B6C1\"},\n\n\n\"--slider-track\": {light: \"#7DC2C5\", dark: \"#9CFFFA\"},\n\"--slider-dot\": {light: \"#7DC2C5\", dark: \"#7DC2C5\"},\n};\n","import React, {useState} from \"react\";\nimport styles from \"./ThemeToggle.module.scss\";\nimport BlankButton from \"./BlankButton\";\nimport {getColorTheme, LIGHT, toggleColorTheme} from \"../../helpers/themeHelper\";\n\nconst ThemeToggle: React.FC<{}> = (props) => {\n    const [isLight, setIsLight] = useState(getColorTheme() === LIGHT);\n    return (\n        <BlankButton\n            data-cy=\"theme-toggle\"\n            {...props}\n            onClick={() => {\n                setIsLight(toggleColorTheme() === LIGHT);\n            }}\n            className={styles.themeToggleContainer}\n        >\n            {isLight\n                ? <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"60\"\n                    height=\"60\"\n                    fill=\"none\"\n                    viewBox=\"0 0 60 60\"\n                >\n                    <path\n                        fill=\"#34344A\"\n                        d=\"M30 21a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z\"\n                    />\n                </svg>\n            : <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"60\"\n                    height=\"60\"\n                    fill=\"none\"\n                    viewBox=\"0 0 60 60\"\n                >\n                    <path\n                        fill=\"#ECECEF\"\n                        d=\"M30 25c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm-10 6h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zm-9-11v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zm-5.01-15.42a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .38-.39.39-1.03 0-1.41l-1.06-1.06zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06a.996.996 0 000 1.41c.39.38 1.03.39 1.41 0l1.06-1.06zM25.05 36.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06a.996.996 0 000 1.41c.39.38 1.03.39 1.41 0l1.06-1.06z\"\n                    />\n                </svg>}\n        </BlankButton>\n    );\n};\n\nexport default ThemeToggle;\n\n","import SettinsIcon from \"./icons/SettingsIcon\";\nimport styles from \"./SettingsOverlayModule.module.scss\";\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { classNames } from \"../helpers/classNames\";\nimport BlankButton from \"./common/BlankButton\";\nimport Slider from \"./common/Slider\";\nimport { usePlotContext } from \"../contexts/PlotContext\";\nimport { ITsneParams } from \"../tsneWrapper/TsneWrapper\";\nimport DropDownInput, {\n  EMPTY_DROPDOWN_ITEM,\n  DropdownItem,\n} from \"./common/DropDownInput\";\nimport Input from \"./common/Input\";\nimport ThemeToggle from \"./common/ThemeToggle\";\n\ntype DropdownItemName = 'colorField' | 'sizeField' | 'nameField';\n\nconst SettingsOverlayModule: React.FC = () => {\n  const [open, setOpen] = useState<boolean>(false);\n\n  return (\n    <>\n      <BlankButton\n        onClick={() => setOpen(o => !o)}\n        title={open ? \"close\" : \"open\"}\n        className={styles.button}\n      >\n        <SettinsIcon />\n      </BlankButton>\n      <div className={classNames(styles.settingsContainer, open && styles.opened)}>\n        <ThemeToggle />\n        <TSneParams />\n        <StyleParams />\n      </div>\n    </>\n\n  );\n}\n\nconst StyleParams: React.FC = () => {\n  const { preprocessedDfColumns, styleSettings, setStyleSettings } = usePlotContext();\n\n  const [dropdownItems, setDropdownItems] = useState<DropdownItem[]>(\n    [EMPTY_DROPDOWN_ITEM],\n  );\n\n  useEffect(() => {\n    if (!preprocessedDfColumns || !preprocessedDfColumns.length) {\n      return;\n    }\n\n    setDropdownItems(\n      preprocessedDfColumns.map((dfKey: string) => ({ key: dfKey })),\n    );\n  }, [preprocessedDfColumns]);\n\n  const getChosenValue = (item: DropdownItem): string => {\n    return item === EMPTY_DROPDOWN_ITEM ? EMPTY_DROPDOWN_ITEM.key : item.key;\n  }\n\n  const handleOnChangeColorField = useCallback((item: DropdownItem) => {\n    setStyleSettings({ ...styleSettings, colorField: getChosenValue(item) });\n  }, [styleSettings]);\n  const handleOnChangeSizeField = useCallback((item: DropdownItem) => {\n    setStyleSettings({ ...styleSettings, sizeField: getChosenValue(item) });\n  }, [styleSettings]);\n  const handleOnChangeNameField = useCallback((item: DropdownItem) => {\n    setStyleSettings({ ...styleSettings, nameField: getChosenValue(item) });\n  }, [styleSettings]);\n  const handleOnChangeOpacity = useCallback((newOpacity: number) => {\n    setStyleSettings({ ...styleSettings, opacity: newOpacity });\n  }, [styleSettings]);\n\n  return (\n    <>\n      <div className={styles.filterTitle}>\n        Styling parameters\n      </div>\n      <div className={styles.paramsGrid}>\n        <div className={styles.paramTitle}>Color Field</div>\n        <DropDownInput\n          itemsList={dropdownItems}\n          selected={styleSettings.colorField\n            ? { key: styleSettings.colorField }\n            : EMPTY_DROPDOWN_ITEM\n          }\n          onChange={handleOnChangeColorField}\n          label=\"Color Field\"\n          error=\"\"\n        />\n        <div className={styles.paramTitle}>Size Field</div>\n        <DropDownInput\n          itemsList={dropdownItems}\n          selected={styleSettings.sizeField\n            ? { key: styleSettings.sizeField }\n            : EMPTY_DROPDOWN_ITEM\n          }\n          onChange={handleOnChangeSizeField}\n          label=\"Size Field\"\n          error=\"\"\n        />\n        <div className={styles.paramTitle}>Opacity</div>\n        <Slider\n          defaultValue={1}\n          max={1}\n          min={0}\n          value={styleSettings.opacity ?? 1}\n          onChange={handleOnChangeOpacity}\n          step={0.01}\n        />\n        <div className={styles.paramTitle}>Name Field</div>\n        <DropDownInput\n          itemsList={dropdownItems}\n          selected={styleSettings.nameField\n            ? { key: styleSettings.nameField } \n            : EMPTY_DROPDOWN_ITEM\n          }\n          onChange={handleOnChangeNameField}\n          label=\"Name Field\"\n          error=\"\"\n        />\n      </div>\n    </>\n  );\n}\n\nconst TSneParams: React.FC = () => {\n  const { tsneParams, setTsneParams } = usePlotContext();\n\n  const [epsilon, setEpsilon] = useState(tsneParams.epsilon);\n  const [perplexity, setPerplexity] = useState(tsneParams.perplexity);\n  const [numSteps, setNumSteps] = useState(tsneParams.numSteps);\n  const [costThreshold, setCostThreshold] = useState(tsneParams.costThreshold);\n\n  const handleOnClickRefitButton = () => {\n    setTsneParams({\n      ...tsneParams,\n      epsilon,\n      perplexity,\n      numSteps,\n      costThreshold,\n    } as ITsneParams);\n  }\n\n  return <>\n    <div className={styles.filterTitle}>\n      T-SNE parameters\n    </div>\n    <div className={styles.paramsGrid}>\n      <div className={styles.paramTitle}>Epsilon</div>\n      <Slider\n        defaultValue={50}\n        max={100}\n        min={0}\n        value={epsilon}\n        onChange={setEpsilon}\n        step={0.5}\n      />\n      <div className={styles.paramTitle}>Perplexity</div>\n      <Slider\n        defaultValue={50}\n        max={100}\n        min={0}\n        value={perplexity}\n        onChange={setPerplexity}\n      />\n      <div className={styles.paramTitle}>Steps number</div>\n      <Input value={numSteps}\n             onChange={(v) => setNumSteps(parseInt(v))}/>\n      <div className={styles.paramTitle}>Cost threshold</div>\n      <Slider\n        defaultValue={50}\n        max={100}\n        min={1}\n        value={costThreshold}\n        onChange={setCostThreshold}\n        step={0.5}\n      />\n\n      <BlankButton\n        className={styles.refitButton}\n        onClick={handleOnClickRefitButton}\n      >\n        Refit\n      </BlankButton>\n    </div>\n  </>\n}\nexport default SettingsOverlayModule;\n","import React from \"react\";\nimport ScatterPlot from \"../../scatterPlot/ScatterPlot\";\nimport Layout from \"../Layout\";\nimport SettingsOverlayModule from \"../SettingsOverlayModule\";\n\nconst TsneGraphView: React.FC = () => {\n\treturn (\n\t\t<Layout>\n\t\t\t<ScatterPlot />\n\t\t\t<SettingsOverlayModule />\n\t\t</Layout>\n\t);\n}\n\nexport default TsneGraphView;\n","import React, { ChangeEvent, useEffect } from \"react\";\nimport { usePlotContext } from \"../../contexts/PlotContext\";\nimport Layout from \"../Layout\";\nimport styles from \"./UploadCsvPage.module.scss\";\nimport Slider from \"../common/Slider\";\n\nconst UploadCsvPage: React.FC = () => {\n\tlet fileInputRef: HTMLInputElement | null = null;\n\n\tconst { setCsvFile } = usePlotContext();\n\n\tconst handleFiles = (e: ChangeEvent<HTMLInputElement>) => {\n\t\tif (e.target.files) {\n\t\t\tsetCsvFile(e.target.files[0]);\n\t\t}\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t<div className={styles.container}>\n\t\t\t\t<input\n\t\t\t\t\tref={(ref) => (fileInputRef = ref)}\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\thidden\n\t\t\t\t\taccept=\".csv\"\n\t\t\t\t\tonChange={handleFiles}\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tclassName={styles.csvButton}\n\t\t\t\t\tonClick={() => fileInputRef?.click()}\n\t\t\t\t>\n\t\t\t\t\tUpload CSV\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n\nexport default UploadCsvPage;\n","import * as React from \"react\";\nimport {useEffect} from \"react\";\nimport {Navigate, Route, Routes, useNavigate, useLocation, HashRouter} from \"react-router-dom\";\nimport TsneGraphView from \"./TsneGraphView\";\nimport UploadCsvPage from \"./UploadCsvPage\";\nimport {PreprocessingStatus, usePlotContext} from \"../../contexts/PlotContext\";\n\nexport const UPLOAD_CSV = \"upload_csv\";\nexport const GRAPH_VIEW = \"graph\";\n\nexport const Router = (): React.ReactElement => {\n\treturn (\n\t\t<HashRouter>\n\t\t\t<PagePicker />\n\t\t</HashRouter>\n\t);\n};\n\nfunction PagePicker() {\n\tconst {preprocessingState} = usePlotContext();\n\tconst navigate = useNavigate();\n\tconst location = useLocation();\n\n\tuseEffect(() => {\n\t\tif (preprocessingState.status === PreprocessingStatus.COMPLETED) {\n\t\t\tnavigate(GRAPH_VIEW);\n\t\t} else if (location.pathname.includes(GRAPH_VIEW)) {\n\t\t\tnavigate(UPLOAD_CSV);\n\t\t}\n\t}, [preprocessingState]);\n\treturn (\n\t\t<Routes>\n\t\t\t<Route path={UPLOAD_CSV} element={<UploadCsvPage />} />\n\t\t\t<Route path={GRAPH_VIEW + \"/*\"} element={<TsneGraphView />} />\n\t\t\t<Route path=\"/\" element={<Navigate to={UPLOAD_CSV} />} />\n\t\t</Routes>\n\t);\n}\n","import React, {useEffect} from 'react';\nimport './App.css';\nimport {Router} from \"./components/pages/Router\";\nimport PlotContextContainer from \"./contexts/PlotContext\";\nimport {updateColorTheme} from \"./helpers/themeHelper\";\n\nfunction App() {\n    useEffect(() => {\n        updateColorTheme();\n    }, []);\n  return (\n    <div className=\"App\">\n      <PlotContextContainer>\n        <Router />\n      </PlotContextContainer>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"BlankButton_button__SL-sV\",\"disabled\":\"BlankButton_disabled__3W6ak\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"Slider_slider__3P0Id\",\"track\":\"Slider_track__3IJP5\",\"thumb\":\"Slider_thumb__160Qs\"};"],"sourceRoot":""}