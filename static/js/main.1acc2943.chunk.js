(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{145:function(t,e,n){t.exports={container:"UploadCsvPage_container__2Kou4",csvButton:"UploadCsvPage_csvButton__2AVTe"}},17:function(t,e,n){t.exports={settingsContainer:"SettingsOverlayModule_settingsContainer__1hhXP",opened:"SettingsOverlayModule_opened__1pMgn",button:"SettingsOverlayModule_button__2cMtM",filterTitle:"SettingsOverlayModule_filterTitle__1C_sZ",paramsGrid:"SettingsOverlayModule_paramsGrid__3BSBK",paramTitle:"SettingsOverlayModule_paramTitle__Pmotw",refitButton:"SettingsOverlayModule_refitButton__1NTO7"}},257:function(t,e,n){t.exports={container:"Layout_container__2g3W4"}},336:function(t,e,n){},337:function(t,e,n){},339:function(t,e,n){},369:function(t,e){},371:function(t,e){},380:function(t,e){},382:function(t,e){},407:function(t,e){},409:function(t,e){},410:function(t,e){},415:function(t,e){},417:function(t,e){},423:function(t,e){},425:function(t,e){},444:function(t,e){},456:function(t,e){},459:function(t,e){},485:function(t,e){},627:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),i=n(250),r=n.n(i),c=(n(336),n(337),n(259)),o=n(4),l=n(19),u=n(12),f=n(46),h=n(47),d=n(20),p=n(25),v=n.n(p),g=v.a.mark(j);function j(){var t,e;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=0,e=360,n.next=4,m(t);case 4:return(t+=e)>=360&&(t=(e/=2)/2),n.next=9,m(t);case 9:n.next=4;break;case 11:case"end":return n.stop()}}),g)}function m(t){return"hsl(".concat(t,", 70%, 60%)")}var b=function(){function t(){Object(f.a)(this,t),this.gen=void 0,this.map=void 0,this.gen=j(),this.map={}}return Object(h.a)(t,[{key:"getColor",value:function(t){return this.map[t]||(this.map[t]=this.gen.next().value),this.map[t]}},{key:"reset",value:function(){this.map={}}}]),t}(),O=Object(h.a)((function t(){var e=this;Object(f.a)(this,t),this.colorManager=new b,this.styleSettings={},this.setSettings=function(t){e.styleSettings=t||{},e.colorManager.reset()},this.getPointRadius=function(t){return t[e.styleSettings.sizeField]||1.51},this.getPointText=function(t){return t[e.styleSettings.nameField]},this.getPointColor=function(t){var n=e.styleSettings.colorField;return e.colorManager.getColor(t[n])},this.getPointOpacity=function(t){return e.styleSettings.opacity||1},this.reset=function(){e.colorManager.reset()},this.styleSettings={}})),S="dot",x={top:0,left:0,bottom:0,right:0},y=function(){function t(){Object(f.a)(this,t),this.styleM=new O,this.svg=void 0,this.mainG=void 0,this.xScale=d.e(),this.yScale=d.e(),this.lineFunction=d.d(),this.margin=x,this.height=0,this.width=0}return Object(h.a)(t,[{key:"init",value:function(t,e){this.svg=d.f(t.current),this.mainG=this.svg.append("g"),this.svg.style("background",e.background||"transparent"),this.svg.attr("height","auto"),this.svg.attr("width","100%"),this.svg.attr("viewBox","0 0 ".concat(e.width," ").concat(e.height)),this.margin=e.margin||x,this.width=e.width-this.margin.left-this.margin.right,this.height=e.height-this.margin.top-this.margin.bottom,this.setupZooming()}},{key:"setupZooming",value:function(){var t,e=this,n=d.g().on("zoom",(function(t){var n,a,s;d.f("svg g").attr("transform",t.transform),null===(n=e.svg)||void 0===n||n.style("stroke-width",3/Math.sqrt(t.transform.k)),null===(a=e.svg)||void 0===a||a.selectAll("circle").attr("r",(function(n){return e.styleM.getPointRadius(n)/Math.sqrt(t.transform.k)})),null===(s=e.svg)||void 0===s||s.selectAll(".".concat(S," text")).style("font-size",5/Math.sqrt(t.transform.k))}));null===(t=this.svg)||void 0===t||t.call(n)}},{key:"updateScales",value:function(t,e){var n,a;this.xScale=d.e().domain([t[0],t[1]]).range([this.margin.left,this.width]),this.yScale=d.e().domain([e[0],e[1]]).range([this.height,this.margin.bottom]),this.lineFunction=(n=this.xScale,a=this.yScale,d.d().x((function(t){return n(t[0])})).y((function(t){return a(t[1])})).curve(d.c))}},{key:"remove",value:function(t){var e;null===(e=this.svg)||void 0===e||e.selectAll(t).remove()}},{key:"updateDots",value:function(t){var e,n=this;this.remove(".dot");var a=null===(e=this.mainG)||void 0===e?void 0:e.selectAll(S).data(t).enter().append("g").attr("class",S);null===a||void 0===a||a.append("circle").attr("cx",(function(t){return n.xScale(t.X)})).attr("cy",(function(t){return n.yScale(t.Y)})).attr("r",this.styleM.getPointRadius).style("opacity",this.styleM.getPointOpacity).style("fill",this.styleM.getPointColor),null===a||void 0===a||a.append("text").text(this.styleM.getPointText).style("color","#69b3a2").style("font-weight","100").style("font-size","10px").attr("x",(function(t){return n.xScale(t.X)})).attr("y",(function(t){return n.yScale(t.Y)}))}},{key:"setUpAxis",value:function(){this.mainG&&(this.mainG.append("g").attr("transform","translate(0,"+this.height+")").attr("class","axis axis--x").call(d.a(this.xScale)).style("color","transparent").selectAll("text").style("fill","#59536B"),this.mainG.append("g").attr("transform","translate("+this.margin.left+", 0)").attr("class","axis axis--y").call(d.b(this.yScale)).style("color","transparent").selectAll("text").style("fill","#59536B"))}}]),t}(),_=(n(339),n(251)),C=n(252),T=n(260),N=n(58);var k=["id"];var E=n(39),M=n(256);function P(){return new Worker(n.p+"static/js/runTsne.worker.6c3fcb0a.worker.js")}var w,D=n(1);!function(t){t[t.NOT_PARSED=0]="NOT_PARSED",t[t.PARSING_TYPES=1]="PARSING_TYPES",t[t.REMOVING_DEFAULT_COLUMNS=2]="REMOVING_DEFAULT_COLUMNS",t[t.REMOVING_EMPTY_COLUMNS=3]="REMOVING_EMPTY_COLUMNS",t[t.ENCODING_STRING_VALUES=4]="ENCODING_STRING_VALUES",t[t.COMPLETED=5]="COMPLETED"}(w||(w={}));var A=[{func:function(t){return t},statusToChange:w.PARSING_TYPES},{func:function(t){var e=t.getColumnNames(),n=JSON.parse(t.toJSON()),a=[];return n.forEach((function(t){var n={};e.forEach((function(e){var a=parseFloat(t[e]);n[e]=isNaN(a)?t[e]:a})),a.push(n)})),Object(N.c)(JSON.stringify(a))},statusToChange:w.REMOVING_DEFAULT_COLUMNS},{func:function(t){return t.dropSeries(k)},statusToChange:w.REMOVING_EMPTY_COLUMNS},{func:function(t){var e=t.getColumnNames(),n=JSON.parse(t.toJSON()),a=[];return e.forEach((function(t){n.every((function(e){return void 0===(n=e[t])||null===n||""===n||"number"===typeof n&&isNaN(n);var n}))&&a.push(t)})),t.dropSeries(a)},statusToChange:w.ENCODING_STRING_VALUES},{func:function(t){var e=t.detectTypes(),n=t,a=new M.Preprocessing.LabelEncoder;return e.forEach((function(e){if("string"===e.Type){var s=t.getSeries(e.Column).toArray(),i=new N.a(a.encode(s));n=(n=n.dropSeries(e.Column)).withSeries(Object(E.a)({},e.Column,i))}})),n},statusToChange:w.COMPLETED}],F=s.a.createContext(null),L=function(){return Object(a.useContext)(F)},R=function(t){Object(C.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(f.a)(this,n),(a=e.call(this,t)).funcs=void 0,a.tsneWorker=new P,a.setStyleSettings=function(t){a.setState({styleSettings:t})},a.setCsvFile=function(t){a.setState({csvFile:t},a.fileToDataFrame)},a.setTsneParams=function(t){a.setState({tsneParams:t},(function(){a.tsneWorker.terminate(),a.tsneWorker=new P,a.initTsneWorker(),a.runTsneSteps()}))},a.fileToDataFrame=Object(_.a)(v.a.mark((function t(){var e,n,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.state.csvFile){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,null===(e=a.state.csvFile)||void 0===e?void 0:e.text();case 4:if(void 0!==(n=t.sent)){t.next=8;break}return console.log("Error: No text from CSV file"),t.abrupt("return");case 8:s=Object(N.b)(n),a.setState({originalDf:s,originalDfJson:s.toArray()},a.preprocessDataFrame);case 10:case"end":return t.stop()}}),t)}))),a.preprocessDataFrame=function(){if(null!==a.state.originalDf){var t=a.state.originalDf;A.forEach((function(e,n){var s=e.func,i=e.statusToChange;t=s(t);var r=n===A.length-1?a.runTsneSteps:function(){};a.setState({preprocessingState:{status:i,preprocessedDf:t}},r)}))}},a.runTsneSteps=function(){var t=a.state.preprocessingState,e=t.status,n=t.preprocessedDf;if(e===w.COMPLETED&&n){var s=n.toArray().map((function(t){return Object.values(t)})),i=Array.from(Array(s.length).keys());a.tsneWorker.postMessage({params:a.state.tsneParams,xData:i,dfData:s})}},a.state={csvFile:null,originalDf:null,originalDfJson:null,preprocessingState:{status:w.NOT_PARSED,preprocessedDf:null},tsneParams:{epsilon:10,perplexity:30,numSteps:1e4,costThreshold:11},tsneStepResult:{currentStep:0,currentCost:0,points:[]},styleSettings:{}},a.funcs={setCsvFile:a.setCsvFile,setStyleSettings:a.setStyleSettings,setTsneParams:a.setTsneParams},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.initTsneWorker()}},{key:"initTsneWorker",value:function(){var t=this;this.tsneWorker.onmessage=function(e){!function(e){t.setState({tsneStepResult:e})}(e.data.result)}}},{key:"render",value:function(){return Object(D.jsx)(F.Provider,{value:Object(l.a)(Object(l.a)({},this.state),this.funcs),children:this.props.children})}}]),n}(s.a.Component);var G={width:600,height:400,margin:{top:10,left:30,bottom:10,right:10}};function V(t){var e=Object(a.useRef)(null),n=Object(a.useState)(),s=Object(u.a)(n,2),i=s[0],r=s[1],c=L(),o=c.styleSettings,f=c.setStyleSettings,h=c.originalDfJson,d=c.tsneStepResult;Object(a.useEffect)(function(t,e){var n=new Date(0).getTime();return function(){var a=(new Date).getTime();a-n>=e&&(t.apply(void 0,arguments),n=a)}}((function(){return function(){var t=d.points.map((function(t){var e=t.rowId,n=t.xCoord,a=t.yCoord,s=h?h[e]:void 0;return s&&Object(l.a)(Object(l.a)({},s),{},{X:n,Y:a})})).filter((function(t){return t}));r(t)}()}),500),[d]);var p=Object(a.useRef)(new y);return Object(a.useEffect)((function(){f({colorField:"mark",sizeField:"availabilitycount",nameField:"model",opacity:.3}),p.current.init(e,G),p.current.updateScales([-25,20],[-20,20])}),[]),Object(a.useEffect)((function(){i&&(p.current.styleM.setSettings(o),p.current.updateDots(i))}),[i,o]),Object(D.jsx)("svg",{ref:e,height:"100%"})}var I=n(257),B=n.n(I),U=function(t){var e=t.children;return Object(D.jsx)("div",{className:B.a.container,children:e})};var W=function(){return Object(D.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",children:[Object(D.jsx)("path",{fill:"#97E0CA",d:"M23.463 9.957l-2.807-.68a9.089 9.089 0 00-.59-1.429l1.44-2.4a.703.703 0 00-.106-.859L19.41 2.6a.703.703 0 00-.858-.105l-2.4 1.44a9.089 9.089 0 00-1.428-.59L14.043.536A.703.703 0 0013.359 0h-2.812a.703.703 0 00-.683.537l-.682 2.807a9.096 9.096 0 00-1.427.59l-2.4-1.44a.703.703 0 00-.86.106L2.507 4.59a.703.703 0 00-.106.858l1.44 2.4A9.09 9.09 0 003.25 9.28l-2.717.68a.703.703 0 00-.533.68v2.812c0 .323.22.604.533.682l2.717.68c.157.495.354.973.59 1.43l-1.44 2.4a.703.703 0 00.107.86l1.988 1.988a.703.703 0 00.86.106l2.4-1.44c.457.237.936.434 1.43.591l.68 2.717c.078.313.36.533.682.533h2.812c.323 0 .604-.22.682-.533l.68-2.717a9.092 9.092 0 001.43-.591l2.401 1.44c.277.166.63.122.859-.106l1.989-1.988a.703.703 0 00.105-.86l-1.44-2.4c.236-.456.434-.934.59-1.427l2.808-.682a.703.703 0 00.537-.683V10.64a.703.703 0 00-.537-.684zm-.87 2.943l-2.664.647a.703.703 0 00-.513.501 7.684 7.684 0 01-.77 1.862.703.703 0 00.006.713l1.365 2.275-1.212 1.213-2.275-1.365a.703.703 0 00-.714-.006 7.689 7.689 0 01-1.861.77.703.703 0 00-.5.508l-.645 2.576h-1.714l-.644-2.576a.703.703 0 00-.5-.508 7.684 7.684 0 01-1.862-.77.703.703 0 00-.714.006L5.101 20.11 3.89 18.898l1.365-2.275a.703.703 0 00.006-.713 7.683 7.683 0 01-.77-1.862.703.703 0 00-.508-.5l-2.576-.644V11.19l2.576-.644a.703.703 0 00.508-.5 7.684 7.684 0 01.77-1.862.703.703 0 00-.006-.714L3.89 5.195l1.212-1.212 2.276 1.365a.703.703 0 00.713.006 7.683 7.683 0 011.862-.77.703.703 0 00.501-.513l.647-2.665h1.707l.646 2.665a.7.7 0 00.502.513 7.684 7.684 0 011.86.77.703.703 0 00.715-.006l2.275-1.365 1.212 1.212-1.365 2.275a.703.703 0 00-.006.714c.335.58.594 1.205.77 1.862.066.248.263.44.513.501l2.665.646V12.9z"}),Object(D.jsx)("path",{fill:"#97E0CA",d:"M12 8c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6.857A2.86 2.86 0 019.143 12 2.86 2.86 0 0112 9.143 2.86 2.86 0 0114.857 12 2.86 2.86 0 0112 14.857z"})]})},J=n(17),Y=n.n(J);function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){if("undefined"===typeof t||!1===t);else{if("string"===typeof t)return t;if(t[1])return t[0]}return null})).filter((function(t){return!!t})).join(" ")}var X=n(261),q=n(93),Z=n.n(q),K=["link","onClick","title","disabled","className","children"],H=function(t){var e=t.link,n=t.onClick,a=t.title,s=t.disabled,i=t.className,r=t.children,c=Object(X.a)(t,K);return e?Object(D.jsx)("a",Object(l.a)(Object(l.a)({href:s?void 0:e,title:a,style:t.style,className:z(Z.a.button,i,s&&Z.a.disabled)},c),{},{children:r})):Object(D.jsx)("button",Object(l.a)(Object(l.a)({onClick:n,title:a,disabled:s,style:t.style,className:z(Z.a.button,i)},c),{},{children:r}))},Q=n(258),$=n(94),tt=n.n($),et=function(t){var e=t.defaultValue,n=t.disabled,a=t.max,s=t.min,i=t.value,r=t.onChange;return Object(D.jsx)(Q.a,{defaultValue:e,disabled:n,max:a,min:s,value:i,onChange:r,className:tt.a.slider,thumbClassName:tt.a.thumb,trackClassName:tt.a.track,renderThumb:function(t,e){return Object(D.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{children:Object(D.jsx)("span",{children:e.valueNow})}))}})},nt=function(){var t=L(),e=t.tsneParams,n=t.setTsneParams,s=Object(a.useState)(e.epsilon),i=Object(u.a)(s,2),r=i[0],c=i[1],o=Object(a.useState)(e.perplexity),l=Object(u.a)(o,2),f=l[0],h=l[1],d=Object(a.useState)(e.numSteps),p=Object(u.a)(d,2),v=p[0],g=p[1],j=Object(a.useState)(e.costThreshold),m=Object(u.a)(j,2),b=m[0],O=m[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:Y.a.filterTitle,children:"T-SNE parameters"}),Object(D.jsxs)("div",{className:Y.a.paramsGrid,children:[Object(D.jsx)("div",{className:Y.a.paramTitle,children:"Epsilon"}),Object(D.jsx)(et,{defaultValue:50,max:100,min:0,value:r,onChange:c}),Object(D.jsx)("div",{className:Y.a.paramTitle,children:"Perplexity"}),Object(D.jsx)(et,{defaultValue:50,max:100,min:0,value:f,onChange:h}),Object(D.jsx)("div",{className:Y.a.paramTitle,children:"Steps number"}),Object(D.jsx)(et,{defaultValue:50,max:1e6,min:1,value:v,onChange:g}),Object(D.jsx)("div",{className:Y.a.paramTitle,children:"Cost threshold"}),Object(D.jsx)(et,{defaultValue:50,max:100,min:1,value:b,onChange:O}),Object(D.jsx)(H,{className:Y.a.refitButton,onClick:function(){n({epsilon:r,perplexity:f,numSteps:v,costThreshold:b})},children:"Refit"})]})]})},at=function(){var t=Object(a.useState)(!1),e=Object(u.a)(t,2),n=e[0],s=e[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(H,{onClick:function(){return s((function(t){return!t}))},title:n?"close":"open",className:Y.a.button,children:Object(D.jsx)(W,{})}),Object(D.jsx)("div",{className:z(Y.a.settingsContainer,n&&Y.a.opened),children:Object(D.jsx)(nt,{})})]})},st=function(){return Object(D.jsxs)(U,{children:[Object(D.jsx)(V,{}),Object(D.jsx)(at,{})]})},it=n(145),rt=n.n(it),ct=function(){var t=null,e=L().setCsvFile;return Object(D.jsx)(U,{children:Object(D.jsxs)("div",{className:rt.a.container,children:[Object(D.jsx)("input",{ref:function(e){return t=e},type:"file",hidden:!0,accept:".csv",onChange:function(t){t.target.files&&e(t.target.files[0])}}),Object(D.jsx)("button",{className:rt.a.csvButton,onClick:function(){var e;return null===(e=t)||void 0===e?void 0:e.click()},children:"Upload CSV"})]})})},ot="upload_csv",lt="graph",ut=function(){return Object(D.jsx)(c.a,{children:Object(D.jsx)(ft,{})})};function ft(){var t=L().preprocessingState,e=Object(o.g)(),n=Object(o.f)();return Object(a.useEffect)((function(){t.status===w.COMPLETED?e(lt):n.pathname.includes(lt)&&e(ot)}),[t]),Object(D.jsxs)(o.d,{children:[Object(D.jsx)(o.b,{path:ot,element:Object(D.jsx)(ct,{})}),Object(D.jsx)(o.b,{path:"graph/*",element:Object(D.jsx)(st,{})}),Object(D.jsx)(o.b,{path:"/",element:Object(D.jsx)(o.a,{to:ot})})]})}var ht=function(){return Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(R,{children:Object(D.jsx)(ut,{})})})},dt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,629)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),a(t),s(t),i(t),r(t)}))};r.a.render(Object(D.jsx)(s.a.StrictMode,{children:Object(D.jsx)(ht,{})}),document.getElementById("root")),dt()},93:function(t,e,n){t.exports={button:"BlankButton_button__SL-sV",disabled:"BlankButton_disabled__3W6ak"}},94:function(t,e,n){t.exports={slider:"Slider_slider__oktDX",track:"Slider_track__1xMSL",thumb:"Slider_thumb__3fYCR"}}},[[627,1,2]]]);
//# sourceMappingURL=main.1acc2943.chunk.js.map